var agent,append_api_to_canvas,isNode,addClass,hasClass,removeClass,Builder,BuilderTeX,CarretCursorUI,Const,ConstColor,Cookie,HtmlKeyboard,Parser,exports=this,DC=(exports.BuildVersion="2.9",exports.BuildDate="2022/02/18",(isNode="undefined"!=typeof process&&"undefined"!=typeof require)&&(console.log("ex_calc.js "+exports.BuildVersion+" "+exports.BuildDate+" (handwrite:"+exports.Build手書き入力タブ+")"),process.exit(0)),-1!==(agent=navigator.userAgent).search(/Android/)&&(window.android=!0),-1!==agent.search(/iPhone/)||-1!==agent.search(/iPad/)||-1!==agent.search(/iPod/)||-1!==agent.search(/Android/)?window.tablet=!0:window.tablet=!1,window.android?window.document.write("<style>\n@font-face {\n    font-family: integral-symbol;  /* フォントにフォント集合名を付ける */\n    src: url('data:application/x-font-woff;charset=utf-8;base64,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') format('woff');\n}\n@font-face {\n    font-family: sigma-symbol;  /* フォントにフォント集合名を付ける */\n    src: url('data:application/x-font-woff;charset=utf-8;base64,d09GRk9UVE8AAAUEAA0AAAAABrwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAABMAAAAYEAAAGghFmYdkZGVE0AAAK0AAAAGgAAABxqpPLUR0RFRgAAAtAAAAAbAAAAIAAvAARPUy8yAAAC7AAAAEkAAABgXYBl3WNtYXAAAAM4AAAAOQAAAUoHV/8UaGVhZAAAA3QAAAAtAAAANgGNlOtoaGVhAAADpAAAABoAAAAkCEMD62htdHgAAAPAAAAACAAAAAgH0AB8bWF4cAAAA8gAAAAGAAAABgACUABuYW1lAAAD0AAAAPoAAAGeoxKP2XBvc3QAAATMAAAAEAAAACAAAwABdmhlYQAABNwAAAAfAAAAJAZSCsJ2bXR4AAAE/AAAAAgAAAAIALQD3HicNY8xSFtRGIXPTV40TUJqooHEPktAoQ4tBCKlQ4dQMnTVyYJTB12MpkYxlSeEKBi9LbQls106pFNTEFS04ODgIBSKiEoQaRx0cemQ+Ehz/N/gHT4+fu495/4KhgGl1IPx6anZZCL5HMoFhWdN09XsczejxoeA0gG3Dhha25Zd9piYemgCXSbehUwETfUlDLfzxIcwHteLm/Vitb60fh+XyU7O5eK595m305MA1ApczmW/imnDLttWu9wZJKxR0F2LI0LXSRSa6JYB/ReCywNoD9mqFIjE0D7Z+DtKDJy2yH99g0RsNSVmHoqVjsibNydEuJglrz+PEf7ZXccMx9JkLdMiPDsF8vcwKP956WV7oySN6kkVbC+XBD8KgpkKqLJbTjde/YlTToNIdtcI36+PRP+IZEYWLLHhb45NEL2LL4intZ9E6PsAkU5deYlHCVni9pPgOC+5Z3n8X9KyYWxPCua2BNtema+9FjtPwRO0rR4dmf9qZ3WHDvjuAHWQsmUAAAB4nGNgYGBkAIIztovOg+jzxiuYYDQARX0F1AAAeJxjYGRgYOADYgkGEGBiYIRCFjCPAQAEVQA0AHicY2BmfsE4gYGVgYOpi2kPAwNDD4RmfMBgyMjEwMDEwMrJAAMNDEggIM01hcGBeTEQKvy3YIhigQgzQijmOwwKQMgIAIWwDBYAAAB4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZiAihb//w9SAKH/xEHVAwEjGwOCM0IBACbbB2wAAAB4nGNgZGBgAGKfd0E/4/ltvjJoM78AijCcN17BjEwzv2ABURwMTCAKADePCZAAAAB4nGNgZGBgYQCCKOYXIApIMjKgAiYAMsICOQAAA+gAAAPoAHwAAFAAAAIAAHicfY89TsNAEIU/J04AgRAVQlRbIFHZWq+RkdLQRdQU6RPJsSL5J7LjIkfgAhyDM9ByDA7AGeA52jQUrDQ737x9M7sLXPBGwLAC8a3nESc8eh5zx6vnkFM+PE8458vzVPqPnEF4JuXm0DXwiEvuPY955slzyBXvnidc8+l5Kv2bii0lPR1GsVe9opFCtS37znT7atWoeiGnkK1kSasyL/pyKZjLXLM75FaOXGMcMVZ5plj781RKSuZVJ4q0D2FJeNCgpt7Nm7bIjYutmZm16tSmmdBlkYucTeT6O46jDRa6u9UXNgeL0dThFSzytts0tUli+1/7LycWO/MAAHicY2BmQAaMDGgAAACOAAV4nGNgFGBg/PKPhyEKCBn+RLEwAAEjAzJgAgBu5gQiAABaAAAAWgPc') format('woff');\n}\n@font-face {\n    font-family: root-symbol;  /* フォントにフォント集合名を付ける */\n    src: url('data:application/x-font-woff;charset=utf-8;base64,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') format('woff');\n}\n</style>"):window.document.write("<style>\n@font-face {\n    font-family: integral-symbol;  /* フォントにフォント集合名を付ける */\n    src: url('data:font/ttf;base64,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') format('truetype');\n}\n@font-face {\n    font-family: sigma-symbol;  /* フォントにフォント集合名を付ける */\n    src: url('data:font/ttf;base64,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') format('truetype');\n}\n@font-face {\n    font-family: root-symbol;  /* フォントにフォント集合名を付ける */\n    src: url('data:font/ttf;base64,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') format('truetype');\n}\n</style>"),window.document.write("<style>\n/* style for Popup */\n#_excalc_toast_wrapper {\n  visibility: hidden;\n  z-index: 999;\n  text-align: center;\n  position: fixed;\n  top: 50%;\n  left: 0;\n  width: 100%;\n}\n#_excalc_toast {\n  visibility: hidden;\n  z-index: 999;\n  background-color: rgba(0,0,0,0.8);\n  color: white;\n  padding:12px;\n  box-shadow: 0 0 10px rgba(0,0,0,0.5);\n  margin: 0 auto;\n  width: 100px;\n}\n</style>"),this.MathWIM=function(){function t(){}return t.OnHtmlReloaded=function(){for(var t,e,n,i,o,r=document.getElementsByClassName("MathWIM.Disp"),s=0,a=r.length;s<a;s++)t=r[s],append_api_to_canvas(t);for(o=[],e=0,n=(i=document.getElementsByClassName("MathWIM")).length;e<n;e++)t=i[e],o.push(append_api_to_canvas(t));return o},t}(),window.addEventListener("load",function(){var t;return HtmlKeyEvent.setup_html_events(),HtmlKeyboard.init_keyboard(),CarretCursorUI.init(),(t=document.createElement("div")).innerHTML='<div id="_excalc_toast_wrapper"><p id="_excalc_toast"></p></div>',document.getElementsByTagName("body").item(0).insertBefore(t,null),(t=document.createElement("div")).id="webfont_load",t.style.fontFamily="integral-symbol, sigma-symbol",t.style.fontSize="45pt",t.innerHTML="wait for web font load. ∫∑",t.style.visibility="hidden",document.getElementsByTagName("body").item(0).insertBefore(t,null),window.tablet?document.addEventListener("touchend",FocusManager.on_body_mousedown):document.addEventListener("mousedown",FocusManager.on_body_mousedown),setTimeout(function(){if(MathWIM.OnHtmlReloaded(),window.setInterval(FocusManager.carret_blink,1e3),null!=window.test_ready_callback)return window.test_ready_callback()},500)}),append_api_to_canvas=function(t){var e;if(!t._MathWIMCanvas){for(t._MathWIMCanvas=new MathWIMCanvas(t),e=t.parentNode;null!==e&&"FORM"!==e.tagName;)e=e.parentNode;if(null!==e)return e[t.id]=t}},hasClass=function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass=function(t,e){hasClass(t,e)||(t.className+=" "+e)},removeClass=function(t,e){hasClass(t,e)&&(e=new RegExp("(\\s|^)"+e+"(\\s|$)"),t.className=t.className.replace(e," "))},Builder=function(){var r;function C(){}function t(t){this.str=t,this.lest=this.str.length}return t.prototype.pop=function(t){var e;return(e=this.str.match(t))?(this.str=this.str.replace(t,""),this.lest=this.str.length,e[0]):null},t.prototype.pop_front=function(t){return this.str.substr(0,t.length)===t?(this.str=this.str.substr(t.length,this.str.length-t.length),this.lest=this.str.length,t):null},t.prototype.is_front=function(t){return this.str.substr(0,t.length)===t},r=t,C.build_one=function(t,e){for(var n,c,h,i,d,o,r,s,l,y,f,p,a,m,u,b,g,k,v,_,A,w=C.multi_container_build_info_table(),x=0,z=w.length;x<z;x++)if(i=w[x],A=e.pop_front(i.fmt)){for(c=!1,o=d=0,l=(u=(_=new i.cls(t)).get_inner_container_sorted_for_build()).length;o<l;o++){for(n=u[o];0!==e.lest;){if(e.is_front("(")&&(d+=1),e.is_front(")")&&-1===--d){e.pop_front(")"),c=!0;break}if(null!==e.pop_front(","))break;null!=(m=this.build_one(t,e))&&n.push(m)}if(c)break}return _}for(r=0,y=(b=C.multi_container_no_kakko_1char_table()).length;r<y;r++)if(i=b[r],v=RegExp("^"+i.fmt.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")+"([^(])"),A=e.pop(v))return(_=new i.cls(t)).get_inner_container_sorted_for_build()[0].push(new NfCharcter(t,A[1])),_;for(s=0,f=(g=C.multi_container_no_kakko_allchild_table()).length;s<f;s++)if(i=g[s],A=e.pop_front(i.fmt)){for(n=(_=new i.cls(t)).get_inner_container_sorted_for_build()[0];0!==e.lest;)null!=(m=this.build_one(t,e))&&n.push(m);return _}for(a=0,p=(k=NfCharcter.fmt_list()).length;a<p;a++)if(h=k[a],A=e.pop_front(h))return _=new NfCharcter(t,NfCharcter.fmt_to_char(h));if(n=e.pop(/^./))return" "===n?void 0:new NfCharcter(t,n)},C.build_main=function(t,e){for(var n,i=new r(e),o=new NfMain(t);0!==i.lest;)null!=(n=this.build_one(t.dc,i))&&o.push(n);return o},C.get_fomula_prefix=function(t){for(var e,n=this.multi_container_build_info_table(),i=0,o=n.length;i<o;i++)if(e=n[i],t.constructor===e.cls)return e.fmt},C.multi_container_build_info_table=function(){return this._multi_container_build_info_table||(this._multi_container_build_info_table=[{fmt:"@F(",cls:NfFraction},{fmt:"@R(",cls:NfRoot},{fmt:"@S(",cls:NfSin},{fmt:"@C(",cls:NfCos},{fmt:"@T(",cls:NfTan},{fmt:"@I(",cls:NfIntegral},{fmt:"@G(",cls:NfSigma},{fmt:"@L(",cls:NfLimit},{fmt:"@O(",cls:NfLogarithm},{fmt:"@P(",cls:NfProbability},{fmt:"@K(",cls:NfCombination},{fmt:"@H(",cls:NfRepeatedCombination},{fmt:"@A(",cls:NfAbsolute},{fmt:"@V(",cls:NfVector},{fmt:"@B(",cls:NfRemainderSetContainer},{fmt:"^(",cls:NfUpperFormula},{fmt:"_(",cls:NfBottomFormula},{fmt:"|(",cls:NfUpperBottomFormula}])},C.multi_container_no_kakko_1char_table=function(){return this._multi_container_no_kakko_1char_table||(this._multi_container_no_kakko_1char_table=[{fmt:"^",cls:NfUpperFormula}])},C.multi_container_no_kakko_allchild_table=function(){return this._multi_container_no_kakko_allchild_table||(this._multi_container_no_kakko_allchild_table=[{fmt:"@F",cls:NfFraction},{fmt:"@R",cls:NfRoot},{fmt:"@S",cls:NfSin},{fmt:"@C",cls:NfCos},{fmt:"@T",cls:NfTan},{fmt:"@I",cls:NfIntegral},{fmt:"@G",cls:NfSigma},{fmt:"@L",cls:NfLimit},{fmt:"@O",cls:NfLogarithm},{fmt:"@P",cls:NfProbability},{fmt:"@K",cls:NfCombination},{fmt:"@H",cls:NfRepeatedCombination},{fmt:"@A",cls:NfAbsolute},{fmt:"@V",cls:NfVector},{fmt:"@B",cls:NfRemainderSetContainer},{fmt:"_",cls:NfBottomFormula},{fmt:"|",cls:NfUpperBottomFormula}])},C}(),BuilderTeX=function(){var o;function z(){}function t(t){this.str=t,this.lest=this.str.length}return t.prototype.pop=function(t){var e;return(e=this.str.match(t))?(this.str=this.str.replace(t,""),this.lest=this.str.length,e[0]):null},t.prototype.pop_front=function(t){var e;if(this.peek_front(t)){for(;(!this.eos||this.str.substr(0,t.length)!==t)&&(e=this.str.replace(" ",""))!==this.str;)this.str=e;return this.str=this.str.substr(t.length,this.str.length-t.length),this.lest=this.str.length,t}return null},t.prototype.peek_front=function(t){return this.str.replace(/\s+/g,"").substr(0,t.length)===t},t.prototype.is_front=function(t){return this.str.substr(0,t.length)===t},t.prototype.remove_space=function(){for(;!this.eos();)if(!this.pop_front(" "))return},t.prototype.eos=function(){return this.lest<=0},t.prototype.stop=function(){return this.str="",this.lest=0},t.prototype.match=function(t){return this.str.match(t)},o=t,z.CCT_NONE=0,z.CCT_UPPER=1,z.CCT_LOWER=2,z.CCT_CaseChangeType=z.CCT_NONE,z.build_one=function(t,e,n,c){var i,h,o,r,s,a,_,d,l,y,f,p,m,u,b,g,k,v,w,x,A;if(e.remove_space(),!(e.eos()||c&&e.is_front("="))){for(e.pop_front("\\mathbsi"),s=0,y=(g=this.first_special_fmt).length;s<y;s++)if(r=g[s],e.pop_front(r.fmt))return void n(A=new NfCharcter(t,r.char));if(e.pop_front("\\mid"))if(e.remove_space(),e.mid_parceing)e.mid_parceing=!1;else{for(A=new NfAbsolute(t),i=A.get_inner_container_sorted_for_build()[0],e.mid_parceing=!0;!e.eos()&&e.mid_parceing;)e.remove_space(),this.build_one(t,e,function(t){return i.push(t)});n(A)}else if(e.pop_front("{"))for(e.remove_space();!e.eos();){if(e.remove_space(),e.pop_front("}"))return;this.build_one(t,e,n)}else{for(_=0,f=(k=z.top_bottom_container_build_info_table()).length;_<f;_++)if(a=k[_],e.pop_front(a.fmt)){for(A=new a.cls(t),o={};!e.eos();){if(i=void 0,!o.top&&e.pop_front("^"))o.top=!0,i=A.top_container;else if(!o.bottom&&e.pop_front("_"))o.bottom=!0,i=A.bottom_container;else if(o.top=!0,o.bottom=!0,i=A.right_container,e.is_front("="))return void n(A);this.build_one(t,e,function(t){return i.push(t)},!0)}return void n(A)}for(d=0,p=(v=z.multi_container_build_info_table()).length;d<p;d++)if(a=v[d],e.pop_front(a.fmt)){for(l=h=0,m=(w=(A=new a.cls(t)).get_inner_container_sorted_for_build()).length;l<m&&(i=w[l],h+=1,e.remove_space(),this.build_one(t,e,function(t){return i.push(t)}),!(a.cnt<=h));l++);return void n(A)}for(b=0,u=(x=this.char_list).length;b<u;b++)if(r=x[b],e.pop_front(r.fmt))return void n(A=new NfCharcter(t,r.char));if(i=e.pop(/^./))return" "===i?void 0:(n(new NfCharcter(t,i)),void console.log("TeX 未対応文字列"+i.charCodeAt(0)+"'"+i+"'"+this.tex));(i=e.pop("\n"))||(i=e.pop("\r"))||console.log("TeX 未対応文字列"+i.charCodeAt(0)+"'"+i+"'"+this.tex)}}},z.build_main=function(t,e){var n,i;for(this.tex=e,i=new o(e),n=new NfMain(t);!i.eos();)this.build_one(t.dc,i,function(t){if(null!=t)return n.push(t)});return n},z.build_into_carret=function(e,t){var n,i;for(this.tex=t,i=new o(t),n=[];!i.eos();)n.push(this.build_one(e.dc,i,function(t){return new AcInsert(e,t).run()}));return n},z.char_to_tex=function(t){for(var e,n,i,o,r=this.char_list,s=0,a=r.length;s<a;s++)if((e=r[s]).char===t)return e.fmt;for(n=0,i=(o=this.first_special_fmt).length;n<i;n++)if((e=o[n]).char===t)return e.fmt;return""},z.get_tex_prefix=function(t){for(var e,n,i,o,r=this.multi_container_build_info_table(),s=0,a=r.length;s<a;s++)if(e=r[s],t.constructor===e.cls)return e.fmt;for(n=0,i=(o=this.top_bottom_container_build_info_table()).length;n<i;n++)if(e=o[n],t.constructor===e.cls)return e.fmt},z.first_special_fmt||(z.first_special_fmt=[{char:"´",fmt:"^{'}"},{char:"´´",fmt:"^{''}"},{char:"ﾟ",fmt:"^{\\circ}"},{char:"´",fmt:"^{\\prime}"}]),z.char_list||(z.char_list=[{char:"•",fmt:"\\cdot"},{char:"◦",fmt:"\\bullet"},{char:"→",fmt:"\\rightarrow"},{char:"∞",fmt:"\\infty"},{char:"∈",fmt:"\\in"},{char:"∋",fmt:"\\ni"},{char:"⊂",fmt:"\\subset"},{char:"⊃",fmt:"\\supset"},{char:"∩",fmt:"\\cap"},{char:"∪",fmt:"\\cup"},{char:"∽",fmt:"\\backsim"},{char:"≡",fmt:"\\equiv"},{char:"⊥",fmt:"\\bot"},{char:"∥",fmt:"\\parallel"},{char:"：",fmt:":"},{char:"△",fmt:"\\triangle"},{char:"∠",fmt:"\\angle"},{char:"Δ",fmt:"\\Delta"},{char:"´",fmt:"'"},{char:"!",fmt:"!"},{char:"σ",fmt:"\\sigma"},{char:"≦",fmt:"\\leqq"},{char:"≦",fmt:"\\le"},{char:"≠",fmt:"\\neq"},{char:"≒",fmt:"\\fallingdotseq"},{char:"≧",fmt:"\\geqq"},{char:"≧",fmt:"\\ge"},{char:"±",fmt:"\\pm"},{char:"π",fmt:"\\pi"},{char:"θ",fmt:"\\theta"},{char:"∅",fmt:"\\varnothing"},{char:"∅",fmt:"\\phi"},{char:"(",fmt:"("},{char:")",fmt:")"},{char:"×",fmt:"\\times"},{char:"＋",fmt:"+"},{char:",",fmt:","},{char:"－",fmt:"-"},{char:".",fmt:"."},{char:"÷",fmt:"\\div"},{char:"＜",fmt:"<"},{char:"＝",fmt:"="},{char:"＞",fmt:">"},{char:"[",fmt:"\\lbrack"},{char:"]",fmt:"\\rbrack"},{char:"α",fmt:"\\alpha"},{char:"β",fmt:"\\beta"},{char:"γ",fmt:"\\gamma"},{char:"0",fmt:"0"},{char:"1",fmt:"1"},{char:"2",fmt:"2"},{char:"3",fmt:"3"},{char:"4",fmt:"4"},{char:"5",fmt:"5"},{char:"6",fmt:"6"},{char:"7",fmt:"7"},{char:"8",fmt:"8"},{char:"9",fmt:"9"},{char:"A",fmt:"A"},{char:"B",fmt:"B"},{char:"C",fmt:"C"},{char:"D",fmt:"D"},{char:"E",fmt:"E"},{char:"F",fmt:"F"},{char:"G",fmt:"G"},{char:"H",fmt:"H"},{char:"I",fmt:"I"},{char:"J",fmt:"J"},{char:"K",fmt:"K"},{char:"L",fmt:"L"},{char:"M",fmt:"M"},{char:"N",fmt:"N"},{char:"O",fmt:"O"},{char:"P",fmt:"P"},{char:"Q",fmt:"Q"},{char:"R",fmt:"R"},{char:"S",fmt:"S"},{char:"T",fmt:"T"},{char:"U",fmt:"U"},{char:"V",fmt:"V"},{char:"W",fmt:"W"},{char:"X",fmt:"X"},{char:"Y",fmt:"Y"},{char:"Z",fmt:"Z"},{char:"a",fmt:"a"},{char:"b",fmt:"b"},{char:"c",fmt:"c"},{char:"d",fmt:"d"},{char:"e",fmt:"e"},{char:"f",fmt:"f"},{char:"g",fmt:"g"},{char:"h",fmt:"h"},{char:"i",fmt:"i"},{char:"j",fmt:"j"},{char:"k",fmt:"k"},{char:"l",fmt:"l"},{char:"m",fmt:"m"},{char:"n",fmt:"n"},{char:"o",fmt:"o"},{char:"p",fmt:"p"},{char:"q",fmt:"q"},{char:"r",fmt:"r"},{char:"s",fmt:"s"},{char:"t",fmt:"t"},{char:"u",fmt:"u"},{char:"v",fmt:"v"},{char:"w",fmt:"w"},{char:"x",fmt:"x"},{char:"y",fmt:"y"},{char:"z",fmt:"z"},{char:"{",fmt:"\\{"},{char:"}",fmt:"\\}"}]),z.multi_container_build_info_table=function(){return this._multi_container_build_info_table||(this._multi_container_build_info_table=[{fmt:"\\dfrac",cls:NfFraction,cnt:2},{fmt:"\\frac",cls:NfFraction,cnt:2},{fmt:"\\sqrt",cls:NfRoot,cnt:1},{fmt:"\\sin",cls:NfSin,cnt:1},{fmt:"\\cos",cls:NfCos,cnt:1},{fmt:"\\tan",cls:NfTan,cnt:1},{fmt:"\\abs",cls:NfAbsolute,cnt:1},{fmt:"\\overrightarrow",cls:NfVector,cnt:1},{fmt:"\\overline",cls:NfRemainderSetContainer,cnt:1},{fmt:"^",cls:NfUpperFormula,cnt:1},{fmt:"_",cls:NfBottomFormula,cnt:1}])},z.top_bottom_container_build_info_table=function(){return this._top_bottom_container_build_info_table||(this._top_bottom_container_build_info_table=[{fmt:"\\sum",cls:NfSigma},{fmt:"\\int",cls:NfIntegral},{fmt:"\\lim",cls:NfLimit},{fmt:"\\log",cls:NfLogarithm}])},z}(),CarretCursorUI=function(){function t(){}return t.init=function(t,o){var e;null==t&&(t="_key_carret_ui_drag_and_drop"),null==o&&(o="_key_carret_drag"),this.element_class_name=t,this.drag_class_name=o,this.html='<style>\n    ._key_carret_cursol_ui {\n      position: absolute;\n      visibility: hidden;\n      cursor: move;\n    }\n    ._key_carret_cursol_ui_square {\n      width: 60px;\n      height: 60px;\n      background: rgba(0,0,255, 0.3);\n    }\n    ._key_carret_cursol_ui_triangle {\n     border-left: 30px solid transparent;\n    border-right: 30px solid transparent;\n    border-top: 30px solid rgba(0,0,255, 0.3);\n    height: 0;\n    }\n</style>\n<div class="_key_carret_cursol_ui '+t+'">\n    <div class="_key_carret_cursol_ui_square"></div>\n    <div class="_key_carret_cursol_ui_triangle _key_carret_cursol_ui_triangle_bottom_design"></div>\n</div>',e=document.createElement("div"),document.body.appendChild(e),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML=this.html;var n,i=document.getElementsByClassName(t),r=void 0,s=void 0,a=function(t){MathWIMCanvas.deSelectText(),FocusManager.on_html_key_mousedown(this),addClass(this,o),t="mousedown"===t.type?t:t.changedTouches[0],r=t.pageX-this.offsetLeft,s=t.pageY-this.offsetTop,HtmlKeyboard.on_start_cursor_ui_move()},_=function(t){var e,n,i=document.getElementsByClassName(o);if(i.length<=0)return t;i=i[0],"mousemove"===t.type?e=t:(e=t.changedTouches[0],t.preventDefault()),i.style.top=e.pageY-s+"px",i.style.left=e.pageX-r+"px",e=(t=i.getBoundingClientRect()).left+t.width/2,i=t.top+t.height+1,null!=(t=document.elementFromPoint(e,i))&&null!=(n=t._ExCalcCanvas)&&n.clickScreenXY(e,i)},A=function(t){var e=document.getElementsByClassName(o)[0];null!=e&&(MathWIMCanvas.deSelectText(),setTimeout(function(){return removeClass(e,o),HtmlKeyboard.on_end_cursor_ui_move(),FocusManager.show_carret_cursor_ui()},0))};for(document.addEventListener("mousemove",_,!1),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("touchend",A,!1),document.addEventListener("mouseup",A,!1),n=0;n<i.length;)i[n].addEventListener("mousedown",a,!1),i[n].addEventListener("touchstart",a,!1),i[n].addEventListener("mousemove",_,!1),i[n].addEventListener("touchmove",_,{passive:!1}),i[n].addEventListener("mouseup",A,!1),i[n].addEventListener("touchend",A,!1),n++},t.show=function(t,e){var n,i=document.getElementsByClassName(this.element_class_name)[0];if(!hasClass(i,this.drag_class_name))return i.style.visibility="visible",t-=(n=i.getBoundingClientRect()).width/2-1,e-=n.height-1,i.style.top=e+"px",i.style.left=t+"px"},t.hide=function(){return document.getElementsByClassName(this.element_class_name)[0].style.visibility="hidden"},t.is_dragged=function(){return null!=document.getElementsByClassName(this.drag_class_name)[0]},t}(),Const=function(){function t(){}return t.HIGH_SCHOOL="HIGH_SCHOOL",t.JUNIOR_HIGH_SCHOOL="JUNIOR_HIGH_SCHOOL",t.手書き入力ストローク数上限=20,t.手書き入力点上限=500,t}(),ConstColor=function(){function t(){}return t.UNDERLINE="#0000FF",t.EMPTY_CONTAINER="#88FF88",t}(),Cookie=function(){function t(){}return t.setCookie=function(t,e,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),n="expires="+i.toGMTString(),document.cookie=t+"="+e+"; "+n},t.getCookie=function(t){for(var e,n=document.cookie.split("; "),i=0;i<n.length;){if((e=n[i].trim().split("="))[0]===t)return e[1];i++}return""},t.deleteCookie=function(t){document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},t}(),this.FocusManager=function(){function i(){}return i.canvas_list=[],i.active_canvas=void 0,i.find_ancestor=function(t,e){return Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),t?t.matches(e)?t:i.find_ancestor(t.parentElement,e):null},i.on_body_mousedown=function(t){if(!i.find_ancestor(t.target,"._key_window")&&!i.find_ancestor(t.target,"._key_carret_cursol_ui_square")&&!CarretCursorUI.is_dragged())return null==i.clicked&&i.set_active_canvas(void 0),i.clicked=void 0},i.on_canvas_mousedown=function(t){if("MathWIM"===t.canvas_type())return i.set_active_canvas(t),i.clicked=t,setTimeout(function(){return i.clicked=void 0},100)},i.on_html_key_mousedown=function(t){return i.clicked=t,setTimeout(function(){return i.clicked=void 0},100)},i.add_canvas=function(t){return i.canvas_list<<t},i.carret_blink=function(){var t,e;return null!=(t=i.active_canvas)&&null!=(e=t.carret)?e.blink():void 0},i.set_active_canvas=function(t){var e,n=i.active_canvas;return i.active_canvas!==t&&null!=(e=i.active_canvas)&&e.carret.lost_focus(),i.active_canvas=t,null!=n&&n.redraw(),t?(i.active_canvas.carret.draw(),HtmlKeyboard.on_change_active_canvas(n,i.active_canvas),i.show_carret_cursor_ui()):(HtmlKeyboard.hide_keyboard(),i.hide_carret_cursor_ui())},i.get_active_canvas=function(){return this.active_canvas},i.show_carret_cursor_ui=function(){var t,e=null!=(e=this.active_canvas)&&null!=(t=e.html_canvas)?t.getBoundingClientRect():void 0;if(e)return t=window.pageXOffset+e.left+(null!=(t=this.active_canvas)?t.carret.carret_draw_info().x:void 0),e=window.pageYOffset+e.top+(null!=(e=this.active_canvas)?e.carret.carret_draw_info().y:void 0),CarretCursorUI.show(t,e)},i.hide_carret_cursor_ui=function(){return CarretCursorUI.hide()},i}(),this.HtmlKeyEvent=function(){function c(){}return c.setup_html_events=function(){return window.document.onkeydown=function(){return!c.is_invalide_key(window.event)},window.addEventListener("keydown",c.key_down,!0)},c.is_invalide_key=function(t){if(null==t)return!1;if(null!=FocusManager.get_active_canvas())switch(t.keyCode){case 8:case 37:case 39:case 38:case 40:return!0}},c.key_down=function(t){var e,n,i,o,r,s,a,_,A=FocusManager.get_active_canvas();if(A)if(o=!1,!(o=navigator.userAgent.match(/(iPad|iPhone)/)&&89===t.keyCode&&"y"!==t.key&&"Y"!==t.key?!0:o)&&(e=c.keyCodeToChar(t.shiftKey,t.keyCode)))A.do_action(new AcInsert(A,new NfCharcter(A.dc,e)));else{if(n=[{keyCode:187,shift:!0,char:"＋"},{keyCode:107,shift:!1,char:"＋",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:189,shift:!1,char:"－"},{keyCode:109,shift:!1,char:"－",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:191,shift:!1,char:"÷"},{keyCode:111,shift:!1,char:"÷",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:186,shift:!0,char:"×"},{keyCode:106,shift:!1,char:"×",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:189,shift:!0,char:"＝"},{keyCode:188,shift:!1,char:","},{keyCode:190,shift:!1,char:"."},{keyCode:110,shift:!1,char:".",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:56,shift:!0,char:"("},{keyCode:57,shift:!0,char:")"},{keyCode:188,shift:!0,char:"＜"},{keyCode:190,shift:!0,char:"＞"},{keyCode:219,shift:!0,char:"{"},{keyCode:221,shift:!0,char:"}"},{keyCode:219,shift:!1,char:"["},{keyCode:221,shift:!1,char:"]"},{keyCode:49,shift:!0,char:"!"},{keyCode:96,shift:!1,char:"0",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:97,shift:!1,char:"1",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:98,shift:!1,char:"2",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:99,shift:!1,char:"3",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:100,shift:!1,char:"4",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:101,shift:!1,char:"5",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:102,shift:!1,char:"6",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:103,shift:!1,char:"7",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:104,shift:!1,char:"8",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD},{keyCode:105,shift:!1,char:"9",location:KeyboardEvent.DOM_KEY_LOCATION_NUMPAD}],s=t.keyCode,_=t.shiftKey,navigator.userAgent.match(/CrOS/))switch(t.key){case"+":s=187;break;case"*":s=186;break;case"]":s=221;break;case"[":s=219;break;case"}":s=221;break;case"{":s=219;break;case"@":case"`":case"~":s=0}if(navigator.userAgent.match(/Mac OS X/))switch(t.key){case"=":s=189;break;case"*":s=186;break;case"_":case"@":s=0}if(navigator.userAgent.match(/(iPad|iPhone)/)){switch(t.key){case"UIKeyInputLeftArrow":s=37;break;case"UIKeyInputRightArrow":s=39;break;case"UIKeyInputUpArrow":s=38;break;case"UIKeyInputDownArrow":s=40}switch(t.key){case"(":s=56;break;case")":s=57;break;case"=":_=!0,s=189;break;case":":case"\\":s=0}}if(navigator.userAgent.match(/Android/))switch(t.key){case"&":case"@":case"~":case"`":s=0;break;case"}":case"]":s=221;break;case"+":s=187;break;case"*":s=186;break;case"[":case"{":s=219}for(i=0,a=n.length;i<a;i++)(r=n[i]).keyCode===s&&r.shift===_&&(null==r.location&&t.location===KeyboardEvent.DOM_KEY_LOCATION_STANDARD||r.location===t.location)&&A.do_action(new AcInsert(A,new NfCharcter(A.dc,r.char)));switch(s){case 8:A.do_action(new AcDelete(A,AcDelete.BACKSPACE));break;case 46:A.do_action(new AcDelete(A,AcDelete.DELETE));break;case 37:A.carret.move_left();break;case 39:A.carret.move_right();break;case 38:A.carret.move_up();break;case 40:A.carret.move_down()}"^"===t.key&&HtmlKeyboard.ruijou()}},c.isAlnum=function(t){return this.isDigit(t)||this.isAlpha(t)},c.isDigit=function(t){return 47<t&&t<58},c.isAlpha=function(t){return 65<=t&&t<=90},c.keyCodeToChar=function(t,e){return this.isDigit(e)?t?void 0:String.fromCharCode(e):this.isAlpha(e)?t?String.fromCharCode(e):String.fromCharCode(e).toLowerCase():void 0},c}(),HtmlKeyboard=function(){function z(){}return z.init_keyboard=function(){var t,e,n,i,o=!1;for(this._keyboard_html_elements=[],e=0,n=(i=document.getElementsByClassName("MathWIMHtmlKeyboard")).length;e<n;e++)(t=i[e]).innerHTML=this.keyboard_html,o=!0,this._keyboard_html_elements.push(t),this.origin_display=t.style.display;if(o)return window.android&&document.getElementById("_key∥").setAttribute("data-key-type","alpha"),this.init_keyboard_events(),this.keyboard_change_to(Const.HIGH_SCHOOL),this.select_keyboard("_keyboard_high1"),this.hide_keyboard(),this.showed_toast={}},z.hide_keyboard=function(){for(var t,e=this._keyboard_html_elements,n=[],i=0,o=e.length;i<o;i++)t=e[i],n.push(t.style.display="none");return n},z.show_keyboard=function(){for(var t,e=this._keyboard_html_elements,n=[],i=0,o=e.length;i<o;i++)t=e[i],n.push(t.style.display=this.origin_display);return n},z.init_keyboard_events=function(){for(var e,t,n,i,o,c,h,d,l,y,f,r,s,a,p,m,u,b,g,k,_,A,v=document.getElementsByClassName("_keyboard_page"),w=0,x=v.length;w<x;w++)(t=v[w]).style.visibility="hidden";if(window.document.getElementById("_keyboard_high1").style.visibility="inherit",z.old="_keyboard_high1",window.tablet){for(n=0,c=(p=document.getElementsByClassName("_key_change_button")).length;n<c;n++)(t=p[n]).ontouchstart=function(){event.stopPropagation(),event.preventDefault(),this.className+=" userhover useractive"},e=this,t.ontouchend=function(t){return this.className=this.className.replace(" userhover useractive",""),FocusManager.on_html_key_mousedown(t),e.on_key_change_button(t),!1};for(i=0,h=(m=document.getElementsByClassName("_keyboard_key")).length;i<h;i++)(t=m[i]).ontouchstart=function(){event.stopPropagation(),event.preventDefault(),this.className+=" userhover useractive"},e=this,t.ontouchend=function(t){return FocusManager.on_html_key_mousedown(t),e.on_keyboard_key(t),this.className=this.className.replace(" userhover useractive",""),!1};for(_=[],o=0,d=(u=document.getElementsByClassName("_keyboard_page")).length;o<d;o++)t=u[o],_.push(t.ontouchend=function(t){return FocusManager.on_html_key_mousedown(t)});return _}for(r=0,l=(b=document.getElementsByClassName("_key_change_button")).length;r<l;r++)(t=b[r]).onmouseover=function(){return this.className+=" userhover"},t.onmouseout=function(){return this.className=this.className.replace(" userhover","")},t.onmousedown=function(t){return t.preventDefault(),t.stopPropagation(),FocusManager.on_html_key_mousedown(t)},t.onclick=this.on_key_change_button;for(s=0,y=(g=document.getElementsByClassName("_keyboard_key")).length;s<y;s++)(t=g[s]).onmouseover=function(){return this.className+=" userhover"},t.onmouseout=function(){return this.className=this.className.replace(" userhover","")},t.onmousedown=function(t){return t.preventDefault(),t.stopPropagation(),FocusManager.on_html_key_mousedown(t)},t.onclick=this.on_keyboard_key;for(A=[],a=0,f=(k=document.getElementsByClassName("_keyboard_page")).length;a<f;a++)t=k[a],A.push(t.onmousedown=function(t){return t.preventDefault(),t.stopPropagation(),FocusManager.on_html_key_mousedown(t)});return A},z.Alpha=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],z.on_keyboard_key=function(t){var e,n,i,o,c,h,d,r,l,y,s,a,_=t.target||t.srcElement,A=FocusManager.get_active_canvas();switch("_keyα"===_.id&&(z.showed_toast["_keyα"]||(z.showed_toast["_keyα"]=!0,Toast.show("ギリシャ文字 アルファ",1e3))),"_keyβ"===_.id&&(z.showed_toast["_keyβ"]||(z.showed_toast["_keyβ"]=!0,Toast.show("ギリシャ文字 ベータ",1e3))),"_key( )"===_.id&&(z.showed_toast["_key( )"]||(z.showed_toast["_key( )"]=!0,Toast.show("()キーを複数回押下すると () -> {} -> [] と切り替わります。",7500))),_.id){case"_keyBS":return A.do_action(new AcDelete(A,AcDelete.BACKSPACE));case"_keyDel":return A.do_action(new AcDelete(A,AcDelete.DELETE));case"_keyΣ":return A.do_action(new AcInsert(A,new NfSigma(A.dc))),A.carret.move_left().move_left().move_left();case"_keylim":return A.do_action(new AcInsert(A,new NfLimit(A.dc))),A.carret.move_left().move_left();case"_keylog":return A.do_action(new AcInsert(A,new NfLogarithm(A.dc))),A.carret.move_left().move_left();case"_key∫":return A.do_action(new AcInsert(A,new NfIntegral(A.dc))),A.carret.move_left().move_left();case"_key分数":return A.do_action(new AcInsert(A,new NfFraction(A.dc))),A.carret.move_left().move_left();case"_key√":return A.do_action(new AcInsert(A,new NfRoot(A.dc))),A.carret.move_left();case"_key( )":return A.do_action(new AcCyclic(A,["(",")","{","}","[","]"]));case"_key左":return A.carret.move_left();case"_key右":return A.carret.move_right();case"_key大":for(z._key_upper=!z._key_upper,s=[],i=0,c=(l=z.Alpha).length;i<c;i++)e=l[i],n=window.document.getElementById("_key"+e),z._key_upper?s.push(n.innerHTML=e.toUpperCase()):s.push(n.innerHTML=e);return s;case"_keysin":return A.do_action(new AcInsert(A,new NfSin(A.dc))),A.carret.move_left();case"_keycos":return A.do_action(new AcInsert(A,new NfCos(A.dc))),A.carret.move_left();case"_keytan":return A.do_action(new AcInsert(A,new NfTan(A.dc))),A.carret.move_left();case"_key絶対値":return A.do_action(new AcInsert(A,new NfAbsolute(A.dc))),A.carret.move_left();case"_key累乗":if(!((r=A.carret.get_part()).parent instanceof NfContainer&&r.parent.is_empty()&&r.parent.parent instanceof NfUpperFormula))return A.do_action(new AcInsert(A,new NfUpperFormula(A.dc))),A.carret.move_left();break;case"_key下付":return A.do_action(new AcInsert(A,new NfBottomFormula(A.dc))),A.carret.move_left();case"_key_P_":return A.do_action(new AcInsert(A,new NfProbability(A.dc))),A.carret.move_left(),A.carret.move_left();case"_key_C_":return A.do_action(new AcInsert(A,new NfCombination(A.dc))),A.carret.move_left(),A.carret.move_left();case"_key_H_":return A.do_action(new AcInsert(A,new NfRepeatedCombination(A.dc))),A.carret.move_left(),A.carret.move_left();case"_keyベクトル":return A.do_action(new AcInsert(A,new NfVector(A.dc))),A.carret.move_left();case"_key余集合":return A.do_action(new AcInsert(A,new NfRemainderSetContainer(A.dc))),A.carret.move_left();default:if(d=_.id.match(/_key(.*)/)){for(a=[],o=0,h=(y=NfCharcter.char_list()).length;o<h;o++)(e=y[o])===d[1]?z._key_upper&&z.Alpha.some(function(t){return e===t})?a.push(A.do_action(new AcInsert(A,new NfCharcter(A.dc,e.toUpperCase())))):a.push(A.do_action(new AcInsert(A,new NfCharcter(A.dc,e)))):a.push(void 0);return a}}},z.on_key_change_button=function(t){var e,n=t.target||t.srcElement;return z.school===Const.HIGH_SCHOOL&&(e=function(){switch(n.id){case"_keyboard_high1.next":return"_keyboard_high2";case"_keyboard_high1.prev":return"_keyboard_high4";case"_keyboard_high2.next":return"_keyboard_high3";case"_keyboard_high2.prev":return"_keyboard_high1";case"_keyboard_high3.next":return"_keyboard_high4";case"_keyboard_high3.prev":return"_keyboard_high2";case"_keyboard_high4.next":return"_keyboard_high1";case"_keyboard_high4.prev":return"_keyboard_high3"}}()),z.school===Const.JUNIOR_HIGH_SCHOOL&&(e=function(){switch(n.id){case"_keyboard_high1.next":case"_keyboard_high1.prev":return"_keyboard_high2";case"_keyboard_high2.next":case"_keyboard_high2.prev":return"_keyboard_high1"}}()),z.select_keyboard(e)},z.select_keyboard=function(t){return null!=this.old&&(document.getElementById(this.old).style.visibility="hidden",document.getElementById(this.old).style.display="none"),document.getElementById(t).style.visibility="inherit",document.getElementById(t).style.display="block",this.old=t},z.on_change_active_canvas=function(t,e){return this.keyboard_change_to(e.school)},z.keyboard_change_to=function(t){if(this.school!==t&&("_keyboard_high3"!==this.old&&"_keyboard_high4"!==this.old||this.select_keyboard("_keyboard_high1")),this.school=t,!this.is_on_start_cursor_ui_move)return this.show_keyboard()},z.is_on_start_cursor_ui_move=!1,z.on_start_cursor_ui_move=function(){return this.is_on_start_cursor_ui_move=!0,this.on_start_cursor_ui_move_canvas=FocusManager.get_active_canvas(),this.hide_keyboard()},z.on_end_cursor_ui_move=function(){return this.is_on_start_cursor_ui_move=!1,this.show_keyboard()},z}(),Parser=function(){function t(){}return t.parse_font_setting=function(t,e){var n,i,o,r,s,a=12;if(void 0!==t){if(n=t.split(","),a=parseFloat(n[1])/10,i=["'"+n[0]+"'"],2<n.length)for(o=r=2,s=n.length;2<=s?r<s:s<r;o=2<=s?++r:--r)i.push(["'"+n[o]+"'"]);e=i.join(",")+","+e}return{size:a,fonts:e}},t}(),this.Toast=function(){function t(){}return t.show=function(t,e){var n;null==e&&(e=1e3),(n=document.querySelector("#_excalc_toast")).innerHTML=t,n.style.visibility="visible",setTimeout(function(){n.innerHTML="",n.style.visibility="hidden"},e)},t}(),this.Carret=function(){function t(t,e,n){this.dc=e,this.ex_canvas=n,this.drawed=!1,this.part=t}return t.prototype.get_container=function(){return this.part.parent},t.prototype.get_index=function(){return this.part.index},t.prototype.get_part=function(){return this.part},t.prototype.get_prev_part=function(){return this.part.prev()},t.prototype.blink=function(){return this.draw()},t.prototype.draw=function(){var t;if(this.drawed=!this.drawed,this.ex_canvas.redraw(),this.drawed)return t=this.carret_draw_info(),this.dc.fill_rect(t.x,t.y+1,2,t.h-2,"#000000")},t.prototype.carret_draw_info=function(){var t,e,n=this.part.prev()||this.part,n=this.part instanceof NfEOC?(t=this.part.carret_info.x,e=this.part.carret_info.y,this.part.carret_info.height):(t=this.part.get_position().x,e=Math.min(n.get_position().y,this.part.get_position().y),Math.max(n.size.y,this.part.size.y));return{x:t,y:e,h:n}},t.prototype.undraw=function(){if(this.drawed)return this.draw()},t.prototype.lost_focus=function(){return this.undraw()},t.prototype.right_search=function(t){var e=t.parent.index,e=t.parent.get(e+1);return!(e instanceof NfEOC)||t.parent instanceof NfMain?e:right_search(e)},t.prototype.move_right=function(){var t;if(this.part instanceof NfMultiContainer)this.move_to(this.part.get(0).get(0));else if(this.part instanceof NfEOC){if((t=this.part.parent)instanceof NfMain)return;t.is_innder_container()&&(null!=t.next()?this.move_to(t.next().get(0)):this.move_to(t.parent.next()))}else null!=this.part.next()&&this.move_to(this.part.next());return this},t.prototype.move_left=function(){var t;if(0===this.part.index){if((t=this.part.parent)instanceof NfMain)return;t.is_innder_container()&&(null!=t.prev()?this.move_to(t.prev().eoc):this.move_to(t.parent))}else(t=this.part.prev())instanceof NfMultiContainer?this.move_to(t.get_last().eoc):this.move_to(t);return this},t.prototype.move_to=function(t){var e,n;return t instanceof NfPart&&(t instanceof NfContainer||(this.undraw(),this.part.parent&&null!=(e=this.part.parent.get_multi_container())&&"function"==typeof e.set_has_carret&&e.set_has_carret(!1),this.part=t,null!=(e=this.part.parent)&&null!=(n=e.get_multi_container())&&"function"==typeof n.set_has_carret&&n.set_has_carret(!0),this.draw(),FocusManager.show_carret_cursor_ui())),this},t.prototype.move_up=function(){var t,e;return(e=this.part.parent.get_multi_container())&&((t=e.get_up_container(this.part.parent))?this.move_to(t.get(0)):this.move_to(e)),this},t.prototype.move_down=function(){var t,e;return(e=this.part.parent.get_multi_container())&&((t=e.get_down_container(this.part.parent))?this.move_to(t.get(0)):this.move_to(e)),this},t}(),function(){function e(t){this.html_canvas_context=t,this._fontHeight=0,this._font_set={},this._font_type=e.OTHER_FONT,this._font_scale=1,this._font_italic=!1}return e.OTHER_FONT="OTHER_FONT",e.ALNUM_FONT="ALNUM_FONT",e.MPLUS_SYMBOL_FONT="MPLUS_SYMBOL_FONT",e.prototype.get_font_height=function(){return 1.25*this._font_set[this._font_type].size},e.prototype.get_font_size=function(){return this._font_set[this._font_type].size},e.prototype.set_font_scale=function(t){if(this._font_scale!==t)return this._font_scale=t,this.update_font()},e.prototype.set_fontset=function(t,e,n){if(this._font_set[t]={},this._font_set[t].fonts=e,this._font_set[t].size=n,this._font_type===t)return this.update_font()},e.prototype.set_font_italic=function(t){if(this._font_italic!==t)return this._font_italic=t,this.update_font()},e.prototype.select_fonttype=function(t){if(this._font_type!==t)return this._font_type=t,this.update_font()},e.prototype.get_current_font_string=function(){var t=this._font_italic?"italic ":"";return""+t+this._font_set[this._font_type].size*this._font_scale*1.25+"px "+this._font_set[this._font_type].fonts},e.prototype.update_font=function(){return this.html_canvas_context.font=this.get_current_font_string()},e.prototype.reset_font=function(t){return this.set_font_scale(t.get_font_scale())},e.prototype.get_font=function(){return this.get_current_font_string()},e.prototype.draw_text=function(t,e,n){return this.html_canvas_context.fillText(t,e,n)},e.prototype.set_line_width=function(t){return this.html_canvas_context.lineWidth=t},e.prototype.set_line_color=function(t,e){var n;return null!=e&&(n=this.html_canvas_context.strokeStyle),this.html_canvas_context.strokeStyle=t,null!=e&&(e(),this.html_canvas_context.strokeStyle=n),this},e.prototype.draw_rect=function(t,e,n,i){return t=Math.ceil(t)-.5,e=Math.ceil(e)-.5,this.html_canvas_context.beginPath(),this.html_canvas_context.strokeRect(t,e,n,i),this.html_canvas_context.stroke()},e.prototype.draw_rect_color=function(t,e,n,i,o){var r;return t=Math.ceil(t)-.5,e=Math.ceil(e)-.5,r=this.html_canvas_context.strokeStyle,this.html_canvas_context.strokeStyle=o,this.draw_rect(t,e,n,i),this.html_canvas_context.strokeStyle=r},e.prototype.draw_line=function(t,e,n,i){return e===i&&(e=i=Math.ceil(e)-.5),t===n&&(t=n=Math.ceil(t)-.5),this.html_canvas_context.beginPath(),this.html_canvas_context.moveTo(t,e),this.html_canvas_context.lineTo(n,i),this.html_canvas_context.stroke()},e.prototype.draw_line_color=function(t,e,n,i,o){var r;return e===i&&(e=i=Math.ceil(e)-.5),t===n&&(t=n=Math.ceil(t)-.5),r=this.html_canvas_context.strokeStyle,this.html_canvas_context.strokeStyle=o,this.html_canvas_context.beginPath(),this.html_canvas_context.moveTo(t,e),this.html_canvas_context.lineTo(n,i),this.html_canvas_context.stroke(),this.html_canvas_context.strokeStyle=r},e.prototype.fill_rect_XOR=function(t,e,n,i,o){var r;return t=Math.ceil(t)-.5,e=Math.ceil(e)-.5,r=this.html_canvas_context.globalCompositeOperation,this.html_canvas_context.globalCompositeOperation="xor",this.fill_rect(t,e,n,i,o),this.html_canvas_context.globalCompositeOperation=r},e.prototype.fill_rect=function(t,e,n,i,o){var r;return t=Math.ceil(t)-.5,e=Math.ceil(e)-.5,r=this.html_canvas_context.fillStyle,this.html_canvas_context.fillStyle=o,this.html_canvas_context.fillRect(t,e,n,i),this.html_canvas_context.fillStyle=r},e.prototype.clear_rect=function(t,e,n,i){return this.html_canvas_context.clearRect(t,e,n,i)},e.prototype.fill_path4=function(t,e,n,i,o,r,s,a){return this.html_canvas_context.beginPath(),this.html_canvas_context.moveTo(t,e),this.html_canvas_context.lineTo(n,i),this.html_canvas_context.lineTo(o,r),this.html_canvas_context.lineTo(s,a),this.html_canvas_context.closePath(),this.html_canvas_context.fill()},e.prototype.set_text_baseline=function(t){return this.html_canvas_context.textBaseline=t},e.prototype.measure_char=function(t,e){return null==e&&(e="1"),this.set_font_scale(t.get_font_scale()),this.measure_text(e)},e.prototype.measure_text=function(t){return this.html_canvas_context.measureText(t).width},e.prototype.set_line_dash=function(t){},e}()),bind=function(t,e){return function(){return t.apply(e,arguments)}},DragEventGenerator=function(){function t(t,c,i){var o,e,r,n,s,a,_,A;for(this.element_class_name=t,this.event_handler=c,null==i&&(i="_dragging_generator_default"),this.drag_simulate=bind(this.drag_simulate,this),e=document.getElementsByClassName(this.element_class_name),r=void 0,_=!1,o=this,s=function(t){var e;addClass(this,i),e="mousedown"===t.type?(r={x:t.clientX,y:t.clientY},t):t.changedTouches[0],e.pageX,this.offsetLeft,e.pageY,this.offsetTop,r={x:e.clientX,y:e.clientY},_=!1,o.event_handler({event:"dragstart",type:t.type})},a=function(t){var e,n;if(!_){if((n=document.getElementsByClassName(i)).length<=0)return t;n[0],"mousemove"===t.type||"drag"===t.type?e=t:(e=t.changedTouches[0],t.preventDefault()),0===(n={x:e.clientX,y:e.clientY}).x&&0===n.y||o.event_handler({event:"drag",x:n.x-r.x,y:n.y-r.y,type:t.type})}},A=function(t){var e=document.getElementsByClassName(i)[0];null!=e&&(_=!0,setTimeout(function(){return removeClass(e,i)},0),o.event_handler({event:"dragend",type:t.type}))},document.addEventListener("mousemove",a,!1),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",A,!1),document.addEventListener("mouseup",A,!1),n=0;n<e.length;)e[n].addEventListener("mousedown",s,!1),e[n].addEventListener("touchstart",s,!1),e[n].addEventListener("mousemove",a,!1),e[n].addEventListener("touchmove",a,{passive:!1}),e[n].addEventListener("mouseup",A,!1),e[n].addEventListener("touchend",A,!1),e[n].addEventListener("dragend",A,!1),e[n].addEventListener("drag",a,!1),n++}return t.prototype.drag_simulate=function(t){return this.event_handler({event:"dragstart",type:"simulate_dragstart"}),this.event_handler({event:"drag",x:t.x,y:t.y,type:"simulate_drag"}),this.event_handler({event:"dragend",type:"simulate_dragend"})},t}(),DraggableElement=function(){function t(t,e){this.cls=t,null==e&&(e={w:null,h:null}),this.startw=0,this.starth=0,this.minw=e.w,this.minh=e.h,this.elm=document.getElementsByClassName(this.cls)}return t.prototype.init_size=function(){return this.startw=this.minw,this.starth=this.minh,this.ondrag(0,0)},t.prototype.ondragstart=function(){for(var t,e=this.elm,n=0,i=e.length;n<i;n++)t=e[n],this.startw=t.offsetWidth,this.starth=t.offsetHeight;if(0===this.startw&&0===this.starth)return this.startw=this.minw,this.starth=this.minh},t.prototype.ondrag=function(t,e){for(var n,i,o=this.elm,r=[],s=0,a=o.length;s<a;s++)n=o[s],(i=this.startw+t)<=this.minw&&(i=this.minw),n.style.width=i+"px",n.width=i,(i=this.starth+e)<=this.minh&&(i=this.minh),n.style.height=i+"px",r.push(n.height=i);return r},t.prototype.getDraggedSize=function(){return{x:this.elm[0].offsetWidth-this.minw,y:this.elm[0].offsetHeight-this.minh}},t}(),MathWIMCanvas=function(){function t(t){var e,n,i,o,r,s,a,_,A,c,h,d;for(this.html_object=t,this.html_canvas=window.document.createElement("canvas"),this.html_canvas.tabindex=0,""!==this.html_object.width&&(this.width=this.html_canvas.width=this.html_object.width),""!==this.html_object.height&&(this.height=this.html_canvas.height=this.html_object.height),this.html_object.parentElement.insertBefore(this.html_canvas,this.html_object),(this.html_canvas._ExCalcCanvas=this).html_object.getAttribute("data-canvas-id")&&(this.html_canvas.id=this.html_object.getAttribute("data-canvas-id")),FocusManager.add_canvas(this),window.tablet?(this.html_canvas.addEventListener("touchstart",(d=this,function(t){return d.mouseDownFunc(t)}),!0),this.html_canvas.addEventListener("touchmove",(h=this,function(t){return h.mouseMoveFunc(t)}),!0),this.html_canvas.addEventListener("touchend",(c=this,function(t){return c.mouseUpFunc(t)}),!0),this.html_canvas.addEventListener("touchcancel",(A=this,function(t){return A.mouseUpFunc(t)}),!0)):this.html_canvas.addEventListener("mousedown",(_=this,function(t){return _.on_mousedown(t)}),!0),i=this.html_object.style.length;0<i--;)s=this.html_object.style[i],this.html_canvas.style.setProperty(s,this.html_object.style.getPropertyValue(s),this.html_object.style.getPropertyPriority(s));for(this.html_canvas.style.cursor="text",this.html_canvas_context=this.html_canvas.getContext("2d"),this.dc=new DC(this.html_canvas_context),this.params={},o=0,r=(a=this.html_object.childNodes).length;o<r;o++)(e=a[o]).nodeType!==Node.TEXT_NODE&&(this.params[e.name]=e.value),this.school=Const.HIGH_SCHOOL;t=Parser.parse_font_setting(this.params.OtherFont,'"MS UI Gothic", "Hiragino Kaku Gothic ProN", "Hiragino Kaku Gothic Pro", "Hiragino Kaku Gothic ProN W3", "ヒラギノ角ゴ Pro W3", "Droid Sans Japanese", "sans-serif"'),n=Parser.parse_font_setting(this.params.AlnumFont,'"Times New Roman", "SERIF"'),this.dc.set_text_baseline("top"),this.dc.set_fontset(DC.OTHER_FONT,t.fonts,t.size),this.dc.set_fontset(DC.ALNUM_FONT,n.fonts,n.size),this.dc.set_fontset(DC.MPLUS_SYMBOL_FONT,["integral-symbol","sigma-symbol","Times New Roman","SERIF"],t.size),null==(n=this.params.Value)&&(n=""),void 0!==this.params.BackColor&&(this._background_color=this.params.BackColor,this.html_canvas.style.backgroundColor=this.params.BackColor),this.root=Builder.build_main(this,n),this.carret=new Carret(this.root.carret_part(),this.dc,this),this.root.do_layout(),t=this.root.size,""===this.html_object.width&&(this.html_object.style.width=0,this.width=this.html_canvas.width=t.x+this.dc.measure_text(" ")),""===this.html_object.height&&(this.html_object.style.height=0,this.height=this.html_canvas.height=t.y),this.dc.set_text_baseline("top"),this.dc.update_font(),this.html_object.style.display="none",this.redraw()}return t.prototype.EncodeHTMLForm=function(t){var e,n,i=[];for(e in t)n=t[e],n=encodeURIComponent(e).replace(/%20/g,"+")+"="+encodeURIComponent(n).replace(/%20/g,"+"),i.push(n);return i.join("&")},t.prototype.do_action=function(t){return this.carret.undraw(),t.run(),this.redraw(),this.carret.draw()},t.prototype.canvas_type=function(){return this.html_object.className},t.prototype.getElementScreenPosition=function(t){var e=document.documentElement,t=t.getBoundingClientRect();return{left:t.left-e.clientLeft,top:t.top-e.clientTop}},t.prototype.getElementPosition=function(t){var e=document.documentElement,n=document.body,i=n.scrollLeft||e.scrollLeft,n=n.scrollTop||e.scrollTop,e=this.getElementScreenPosition(t);return{left:e.left+i,top:e.top+n}},t.prototype.mouseDownFunc=function(t){var e=t.targetTouches[0],n=this.getElementPosition(this.html_canvas);return this.last_x=t.offsetX=e.pageX-n.left,this.last_y=t.offsetY=e.pageY-n.top,!1},t.prototype.mouseUpFunc=function(t){return this._click(this.last_x,this.last_y),!1},t.prototype.mouseMoveFunc=function(t){var e=t.targetTouches[0],n=this.getElementPosition(this.html_canvas);return this.last_x=t.offsetX=e.pageX-n.left,this.last_y=t.offsetY=e.pageY-n.top,this._click(this.last_x,this.last_y),!1},t.prototype.on_mousedown=function(t){return this._click(t.offsetX,t.offsetY)},t.prototype._click=function(t,e){var n;if(FocusManager.on_canvas_mousedown(this),"MathWIM"===this.html_object.className&&null!=(n=this.root.get_parts_from_position(t,e)))return this.carret.move_to(n)},t.prototype.clickScreenXY=function(t,e){var n=this.html_canvas.getBoundingClientRect();return t-=n.left,e-=n.top,this._click(t,e)},t.prototype.getCarretScreenPos=function(){},t.prototype.clear_rect=function(){return this._background_color?this.dc.fill_rect(0,0,this.html_canvas.width,this.html_canvas.height,this._background_color):this.dc.clear_rect(0,0,this.html_canvas.width,this.html_canvas.height)},t.prototype.redraw=function(){return this.clear_rect(),this.root.draw()},t.deSelectText=function(){var t;window.getSelection?(t=window.getSelection()).collapse(document.body,0):((t=document.selection.createRange()).setEndPoint("EndToStart",t),t.select())},t}(),LayoutVisitor=function(){function t(){this._x=0,this._y=0}return t.prototype.move=function(t,e){return this._x+=t,this._y+=e},t.prototype.move_x=function(t){return this._x+=t},t.prototype.move_y=function(t){return this._y+=t},t.prototype.set=function(t,e){return this._x=t,this._y=e},t.prototype.set_x=function(t){return this._x=t},t.prototype.set_y=function(t){return this._y=t},t.prototype.get_position=function(){return{x:this._x,y:this._y}},t.prototype.x=function(){return this._x},t.prototype.y=function(){return this._y},t.prototype.set_char_vcenter=function(t){return this._char_vcenter=t},t.prototype.get_char_vcenter=function(){return this._char_vcenter},t.prototype.get_char_vcenter_y=function(){return this._y+this._char_vcenter},t}(),NfPart=function(){function t(){this.parent=null,this.size={x:0,y:0,bottom_height:0,top_height:0},this._position={x:0,y:0},this.position=null,this.index=0,this._class=this.constructor.name}return t.prototype.get_font_height=function(){return this.dc.get_font_height()*this.get_font_scale()},t.prototype.get_font_size=function(){return this.dc.get_font_size()*this.get_font_scale()},t.prototype.get_font_scale=function(){var t;return null!=this._font_scale?this._font_scale:null!=(t=this.parent)?t.get_font_scale():void 0},t.prototype.set_font_scale=function(t){return this._font_scale=t},t.prototype.main_part=function(){return null===this.parent?this:this.parent.main_part()},t.prototype.canvas_type=function(){return this.main_part().ex_calc_canvas.canvas_type()},t.prototype.set_parent=function(t){return this.parent=t},t.prototype.set_position=function(t,e){return this._position={x:t,y:e}},t.prototype.get_position=function(){return this._position},t.prototype.set_index=function(t){return this.index=t},t.prototype.is_include=function(t,e){return this.get_position().x<=t&&t<=this.get_position().x+this.size.x&&this.get_position().y<=e&&e<=this.get_position().y+this.size.y},t.prototype.is_innder_container=function(){return null!=this._is_innder_container},t.prototype.set_is_innder_container=function(t){return this._is_innder_container=t},t.prototype.next=function(){return this.parent.get(this.index+1)},t.prototype.prev=function(){if(0!==this.index)return this.parent.get(this.index-1)},t.prototype.do_layout=function(t){return null},t.prototype.char_vcenter=function(){return 0},t.prototype.get_size_with_char_vcenter=function(t){return this.size},t.prototype.set_has_carret=function(t){return this._has_carret=t},t.prototype.has_carret=function(){var t;return!!this._has_carret&&(FocusManager.get_active_canvas()===(null!=(t=this.main_part())?t.ex_calc_canvas:void 0)&&this._has_carret)},t.prototype.delete=function(){return this.parent.remove(this.index)},t.prototype.get_multi_container=function(){return this instanceof NfMultiContainer?this:this instanceof NfMain?void 0:this.parent.get_multi_container()},t}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfMultiContainer=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return extend(t,NfPart),t.prototype.set_inner_container=function(){for(var t,e,n=[],i=e=0,o=(this._inner_container=arguments).length;e<o;i=++e)(t=arguments[i]).index=i,t.set_parent(this),n.push(t.set_is_innder_container(!0));return n},t.prototype.has_child=function(){return!0},t.prototype.set_inner_container_sorted_for_build=function(){return this._inner_container_sorted_for_build=arguments},t.prototype.each_inner_container_sorted_for_build=function(t){for(var e,n=this._inner_container_sorted_for_build,i=[],o=0,r=n.length;o<r;o++)e=n[o],i.push(t(e));return i},t.prototype.get_inner_container_sorted_for_build=function(){return this._inner_container_sorted_for_build},t.prototype.get=function(t){return this._inner_container[t]},t.prototype.get_up_container=function(t){},t.prototype.get_down_container=function(t){},t.prototype.get_last=function(){return this.get(this._inner_container.length-1)},t.prototype.on_change_children=function(){if(this.update_children(),this.parent)return this.parent.on_change_children()},t.prototype.update_children=function(){for(var t,e=this._inner_container,n=[],i=0,o=e.length;i<o;i++)t=e[i],n.push(t.update_children());return n},t.prototype.carret_part=function(){for(var t,e=this._inner_container,n=0,i=e.length;n<i;n++)if(null!=(t=e[n]).carret_part())return t.carret_part()},t.prototype.draw_focus_box=function(){var t,e,n,i,o,r,s;if(this.has_carret()){for(o=this.get_position(),this.dc.set_line_width(1),t=o.y+this.size.y+this.size.bottom_height,this.dc.draw_line_color(o.x,t-10,o.x,t,ConstColor.UNDERLINE),this.dc.draw_line_color(o.x,t,o.x+this.size.x,t,ConstColor.UNDERLINE),this.dc.draw_line_color(o.x+this.size.x,t-10,o.x+this.size.x,t,ConstColor.UNDERLINE),s=[],n=0,i=(r=this._inner_container).length;n<i;n++)e=r[n],s.push(e.draw_forcus_box());return s}},t}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfSin=function(){function s(t,e){var n,i,o,r;for(this.dc=t,this.type=null!=e?e:"sin",s.__super__.constructor.call(this),this.container=new NfContainer(this.dc),this.set_inner_container(this.container),this.set_inner_container_sorted_for_build(this.container),this.symbol=new NfContainer(this.dc),this.symbol.set_parent(this),o=0,r=(n=this.type.split("")).length;o<r;o++)i=n[o],(i=new NfCharcter(this.dc,i)).italic=!1,this.symbol.push(i)}return extend(s,NfMultiContainer),s.prototype.draw=function(){return this.container.draw(),this.symbol.draw(),this.draw_focus_box()},s.prototype.char_vcenter=function(){return this.container.char_vcenter()},s.prototype.calc_size=function(){var t,e;return this.container.calc_size(),this.symbol.calc_size(),t=this.symbol.size,e=this.container.size,this.size={x:t.x+e.x,y:Math.max(t.y,e.y),bottom_height:e.bottom_height},this.symbol.calc_size()},s.prototype.do_layout=function(t){var e,n;return this.calc_size(),e=t.get_position(),n=t.get_char_vcenter_y(),this.set_position(t.x(),n-this.char_vcenter()),t.set_y(n-this.symbol.char_vcenter()),t.set_char_vcenter(0),this.symbol.do_layout(t),t.set_y(n-this.container.char_vcenter()),t.set_char_vcenter(0),this.container.do_layout(t),t.set_y(e.y)},s.prototype.get_parts_from_position=function(t,e){return t<this.container.get_position().x?this:this.container.get_parts_from_position(t,e)},s}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfCos=function(){function e(t){e.__super__.constructor.call(this,t,"cos")}return extend(e,NfSin),e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfTan=function(){function e(t){e.__super__.constructor.call(this,t,"tan")}return extend(e,NfSin),e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfAbsolute=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.container=new NfContainer(this.dc),this.set_inner_container(this.container),this.set_inner_container_sorted_for_build(this.container)}return extend(e,NfMultiContainer),e.prototype.draw=function(){var t,e,n,i;return this.container.draw(),t=this.get_position(),e=Math.ceil(t.x+2),n=Math.ceil(t.y),i=Math.ceil(t.y+this.container.size.y+this.container.size.bottom_height),this.dc.draw_line_color(e,n,e,i,"#000000"),e=Math.ceil(t.x+2+1+2+this.container.size.x+2),this.dc.draw_line_color(e,n,e,i,"#000000"),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.container.char_vcenter()},e.prototype.calc_size=function(){return this.container.calc_size(),this.size.x=5+this.container.size.x+2+1+2,this.size.y=this.container.size.y,this.size.bottom_height=this.container.size.bottom_height},e.prototype.do_layout=function(t){var e,n;return this.calc_size(),e=t.get_position(),n=t.get_char_vcenter_y(),this.set_position(t.x(),n-this.char_vcenter()),t.move_x(5),t.set_y(n-this.container.char_vcenter()),t.set_char_vcenter(0),this.container.do_layout(t),t.move_x(5),t.set_y(e.y)},e.prototype.get_parts_from_position=function(t,e){return t<this.container.get_position().x||e<this.container.get_position().y?this:this.container.get_parts_from_position(t,e)},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfBothSideContainer=function(){function s(t,e){var n,i,o,r;for(this.dc=t,this.center_char=e,s.__super__.constructor.call(this),this.left_container=new NfContainer(this.dc),this.right_container=new NfContainer(this.dc),this.set_inner_container(this.left_container,this.right_container),this.set_inner_container_sorted_for_build(this.left_container,this.right_container),this.center_symbol=new NfContainer(this.dc),this.center_symbol.set_parent(this),i=0,o=(r=this.center_char).length;i<o;i++)n=r[i],(n=new NfCharcter(this.dc,n)).italic=!1,this.center_symbol.push(n)}return extend(s,NfMultiContainer),s.prototype.draw=function(){return this.center_symbol.draw(),this.left_container.draw(),this.right_container.draw(),this.draw_focus_box()},s.prototype.char_vcenter=function(){return this.center_symbol.char_vcenter()},s.prototype.calc_size=function(){var t,e=.6*this.get_font_scale();return 9<this.dc.get_font_size()*e?(this.left_container.set_font_scale(e),this.right_container.set_font_scale(e)):(this.left_container.set_font_scale(9/this.dc.get_font_size()),this.right_container.set_font_scale(9/this.dc.get_font_size())),this.center_symbol.calc_size(),this.left_container.calc_size(),this.right_container.calc_size(),this._top_of_bottom_container=0,e="P"===this.center_char?-this.center_symbol.size.x/4:0,this.size.x=this.left_container.size.x+(this.center_symbol.size.x+e)+this.right_container.size.x,this.size.y=Math.max(this.left_container.size.y+this.char_vcenter()+this._top_of_bottom_container,this.center_symbol.size.y,this.right_container.size.y+this.char_vcenter()+this._top_of_bottom_container),e=Math.max(this.left_container.size.y,this.right_container.size.y),t=Math.max(this.left_container.size.y+this.left_container.size.bottom_height,this.right_container.size.y+this.right_container.size.bottom_height),this.size.bottom_height=t-e},s.prototype.do_layout=function(t){var e=t.get_position(),n=t.get_char_vcenter_y();return this.set_position(t.x(),n-this.get_font_height()/2),t.set_x(e.x),t.set_y(n+this._top_of_bottom_container),t.set_char_vcenter(0),this.left_container.do_layout(t),t.set_y(n-this.center_symbol.char_vcenter()),this.center_symbol.do_layout(t),"P"===this.center_char&&t.move_x(-this.center_symbol.size.x/4),t.set_y(n+this._top_of_bottom_container),t.set_char_vcenter(0),this.right_container.do_layout(t),t.set_y(e.y),t.set_x(e.x+this.size.x)},s.prototype.get_parts_from_position=function(t,e){var n=this.left_container.get_position(),i=(this.right_container.get_position(),this.center_symbol.get_position());return!(e<n.y&&t<i.x)&&n.x<t?(t<i.x||t<i.x+this.center_symbol.size.x/2?this.left_container:this.right_container).get_parts_from_position(t,e):this},s.prototype.get_up_container=function(t){if(t===this.right_container)return this.left_container},s.prototype.get_down_container=function(t){if(t===this.left_container)return this.right_container},s}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfBottomFormula=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.bottom=new NfContainer(this.dc),this.set_inner_container(this.bottom),this.set_inner_container_sorted_for_build(this.bottom)}return extend(e,NfMultiContainer),e.prototype.draw=function(){return this.bottom.draw(),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.get_font_height()/2},e.prototype.get_size_with_char_vcenter=function(t){return{x:this.size.x,y:this.size.y+t-this.char_vcenter(),bottom_height:this.size.bottom_height}},e.prototype.calc_size=function(){var t=.6*this.get_font_scale();return 9<this.dc.get_font_size()*t?this.bottom.set_font_scale(t):this.bottom.set_font_scale(9/this.dc.get_font_size()),this.bottom.calc_size(),this._top_of_bottom_container=0,this.size.x=this.bottom.size.x,this.size.y=this.get_font_height()/2+this._top_of_bottom_container+this.bottom.size.y,this.size.bottom_height=this.bottom.size.bottom_height},e.prototype.do_layout=function(t){var e,n;return this.calc_size(),e=t.get_position(),n=t.get_char_vcenter_y(),this.set_position(t.x(),n-this.get_font_height()/2),t.set_y(n+this._top_of_bottom_container),t.set_char_vcenter(0),this.bottom.do_layout(t),t.set_y(e.y)},e.prototype.get_parts_from_position=function(t,e){return this.bottom.get_parts_from_position(t,e)},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfCharcter=function(){function _(t,e){switch(this.dc=t,this.char=e,_.__super__.constructor.call(this),!0){case/[0-9A-Z]/.test(this.char):this.font_type=DC.ALNUM_FONT,this.italic=!1;break;case/[a-zαβγθπσ]/.test(this.char):this.font_type=DC.ALNUM_FONT,this.italic=!0;break;case/∥/.test(this.char):window.android?(this.font_type=DC.ALNUM_FONT,this.italic=!0):(this.font_type=DC.OTHER_FONT,this.italic=!1);break;case/[•Σ∫\(\)]/.test(this.char):this.font_type=DC.MPLUS_SYMBOL_FONT,this.italic=!1;break;default:this.font_type=DC.OTHER_FONT,this.italic=!1}}return extend(_,NfPart),_._info_table=[{char:"•",fmt:"@00"},{char:"◦",fmt:"@01"},{char:"→",fmt:"@02"},{char:"∈",fmt:"@03"},{char:"∋",fmt:"@04"},{char:"⊂",fmt:"@05"},{char:"⊃",fmt:"@06"},{char:"∩",fmt:"@07"},{char:"∪",fmt:"@08"},{char:"∽",fmt:"@09"},{char:"≡",fmt:"@10"},{char:"⊥",fmt:"@11"},{char:"∥",fmt:"@12"},{char:"：",fmt:"@13"},{char:"△",fmt:"@80"},{char:"∠",fmt:"@81"},{char:"Δ",fmt:"@82"},{char:"ﾟ",fmt:"@90"},{char:"´",fmt:"@91"},{char:"!",fmt:"@92"},{char:"σ",fmt:"@93"},{char:"≦",fmt:"<="},{char:"≠",fmt:"=/"},{char:"≒",fmt:"=*"},{char:"≧",fmt:">="},{char:"±",fmt:"!"},{char:"π",fmt:"#"},{char:"θ",fmt:"$"},{char:"∞",fmt:"%"},{char:"∅",fmt:"&"},{char:"(",fmt:"("},{char:")",fmt:")"},{char:"×",fmt:"*"},{char:"＋",fmt:"+"},{char:",",fmt:","},{char:"－",fmt:"-"},{char:".",fmt:"."},{char:"÷",fmt:"/"},{char:"0",fmt:"0"},{char:"1",fmt:"1"},{char:"2",fmt:"2"},{char:"3",fmt:"3"},{char:"4",fmt:"4"},{char:"5",fmt:"5"},{char:"6",fmt:"6"},{char:"7",fmt:"7"},{char:"8",fmt:"8"},{char:"9",fmt:"9"},{char:"β",fmt:":"},{char:"＜",fmt:"<"},{char:"＝",fmt:"="},{char:"＞",fmt:">"},{char:"α",fmt:"?"},{char:"A",fmt:"A"},{char:"B",fmt:"B"},{char:"C",fmt:"C"},{char:"D",fmt:"D"},{char:"E",fmt:"E"},{char:"F",fmt:"F"},{char:"G",fmt:"G"},{char:"H",fmt:"H"},{char:"I",fmt:"I"},{char:"J",fmt:"J"},{char:"K",fmt:"K"},{char:"L",fmt:"L"},{char:"M",fmt:"M"},{char:"N",fmt:"N"},{char:"O",fmt:"O"},{char:"P",fmt:"P"},{char:"Q",fmt:"Q"},{char:"R",fmt:"R"},{char:"S",fmt:"S"},{char:"T",fmt:"T"},{char:"U",fmt:"U"},{char:"V",fmt:"V"},{char:"W",fmt:"W"},{char:"X",fmt:"X"},{char:"Y",fmt:"Y"},{char:"Z",fmt:"Z"},{char:"[",fmt:"["},{char:"]",fmt:"]"},{char:"a",fmt:"a"},{char:"b",fmt:"b"},{char:"c",fmt:"c"},{char:"d",fmt:"d"},{char:"e",fmt:"e"},{char:"f",fmt:"f"},{char:"g",fmt:"g"},{char:"h",fmt:"h"},{char:"i",fmt:"i"},{char:"j",fmt:"j"},{char:"k",fmt:"k"},{char:"l",fmt:"l"},{char:"m",fmt:"m"},{char:"n",fmt:"n"},{char:"o",fmt:"o"},{char:"p",fmt:"p"},{char:"q",fmt:"q"},{char:"r",fmt:"r"},{char:"s",fmt:"s"},{char:"t",fmt:"t"},{char:"u",fmt:"u"},{char:"v",fmt:"v"},{char:"w",fmt:"w"},{char:"x",fmt:"x"},{char:"y",fmt:"y"},{char:"z",fmt:"z"},{char:"{",fmt:"{"},{char:"}",fmt:"}"},{char:"γ",fmt:"~"}],_.charcter_max_bottom_height={},_.char_list=function(){return this._char_list||(this._char_list=this._info_table.map(function(t){return t.char}))},_.fmt_list=function(){return this._fmt_list||(this._fmt_list=this._info_table.map(function(t){return t.fmt}))},_.fmt_to_char=function(t){for(var e,n=this._info_table,i=0,o=n.length;i<o;i++)if((e=n[i]).fmt===t)return e.char;return t},_.char_to_fmt=function(t){for(var e,n=this._info_table,i=0,o=n.length;i<o;i++)if((e=n[i]).char===t)return e.fmt;return""},_.build=function(t,e,n){return new _(t,e)},_.prototype.map_charcter_height=function(){var t,e,n,i,o,r,s=this.get_font_height(),a=[this.font_type,s];if(!_.charcter_max_bottom_height[a]){for(r=[],t=_.charcter_max_bottom_height[a]=0,n=(o=_._info_table).length;t<n;t++)e=o[t],(i=~~((i=_.getLetterMetrics(e.char,1.25*this.get_font_height(),this.get_font_height(),this.my_dc().get_font())).height-(i.ascent-i.from_top)))!=1/0&&_.charcter_max_bottom_height[a]<i&&"＝"!==e.char&&"≠"!==e.char?r.push(_.charcter_max_bottom_height[a]=i):r.push(void 0);return r}},_.prototype.draw=function(){return-1!==navigator.userAgent.search(/Chrome/)&&-1===navigator.userAgent.search(/Edge/)&&("Σ"===this.char||"∫"===this.char)?this.my_dc().draw_text(this.char,this.get_position().x,this.get_position().y+this.get_font_height()/10*2):this.my_dc().draw_text(this.char,this.get_position().x,this.get_position().y)},_.prototype.my_dc=function(){return this.dc.select_fonttype(this.font_type),this.dc.set_font_italic(this.italic),this.dc.reset_font(this),this.dc.set_font_scale(this.get_font_scale()),this.dc},_.prototype.calc_size=function(){var t,e;if(this.my_dc(),this.map_charcter_height(),this.size={x:this.my_dc().measure_text(this.char),y:this.get_font_height()},t=_.getLetterMetrics(this.char,1.25*this.get_font_height(),this.get_font_height(),this.my_dc().get_font()),e=[this.font_type,this.get_font_height()],this.size={x:this.my_dc().measure_text(this.char),y:this.get_font_height(),top_height:~~(t.ascent-t.from_top),bottom_height:_.charcter_max_bottom_height[e],real_height:t.height},window.android)return this.size.bottom_height*=1.2,this.size.y*=1.1},_.prototype.do_layout=function(t){return this.my_dc(),t.get_char_vcenter_y(),this.set_position(t.x(),t.get_char_vcenter_y()-this.get_font_height()/2),t.move(this.size.x,0)},_.prototype.char_vcenter=function(){return this.my_dc(),this.get_font_height()/2},_.getLetterMetrics=function(t,e,n,i,o){var c,r,s,a,h,d,_,A;if("＝"===t)return{height:e,width:o,from_top:0,ascent:n};if(r=[t,e,n,i,o],this.getLetterMetrics_cache||(this.getLetterMetrics_cache={}),void 0!==this.getLetterMetrics_cache[r])return this.getLetterMetrics_cache[r];for((a=(c=document.createElement("canvas")).getContext("2d")).font=i,a.textBaseline="alphabetic",o=Math.ceil(a.measureText(t).width),(o*=2)<=20&&(o=20),(e=Math.ceil(e))<=20&&(e=20),c.width=o,c.height=e,a.font=i,a.textBaseline="alphabetic",a.fillStyle="#ff0000",a.fillText(t,o/4,n),h=a.getImageData(0,0,o,e).data,_=1/0,A=0;A<e;){for(s=0;s<o;){if(h[A*o*4+4*s]){_=A,A=1/0;break}s++}A++}for(A=e-1;0<=A;){for(s=o-1;0<=s;){if(h[A*o*4+4*s]){d=A,A=-1;break}s--}A--}return this.getLetterMetrics_cache[r]={height:d-_+1,width:o,from_top:_,ascent:n}},_}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfCombination=function(){function e(t){e.__super__.constructor.call(this,t,"C")}return extend(e,NfBothSideContainer),e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfContainer=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.parts=[],this.eoc=new NfEOC(this.dc),this.eoc.set_parent(this)}return extend(e,NfPart),e.prototype.get=function(t){return t<this.length()?this.parts[t]:this.eoc},e.prototype.set_parent=function(t){return this.parent=t},e.prototype.on_change_children=function(){if(this.update_children(),this.parent)return this.parent.on_change_children()},e.prototype.insert=function(t,e){if(this.parts.splice(t,0,e),e.set_parent(this),this.update_children(),this.parent)return this.parent.on_change_children()},e.prototype.length=function(){return this.parts.length},e.prototype.is_empty=function(){return 0===this.length()},e.prototype.push=function(t){if(t instanceof NfPart)return this.parts.push(t),t.set_parent(this),this.update_children(),this.parent?(this.parent.on_change_children,this.parent.on_change_children()):void 0},e.prototype.remove_all=function(){if(this.parts=[],this.update_children(),this.parent)return this.parent.on_change_children()},e.prototype.remove=function(t){if(this.parts.splice(t,1),this.update_children(),this.parent)return this.parent.on_change_children()},e.prototype.insert_array=function(t,e){for(var n,i,o=n=0,r=e.length;n<r;o=++n)i=e[o],this.parts.splice(t+o,0,i);return this.update_children()},e.prototype.carret_part=function(){var t=this.parts,e=0;return e<t.length?(t=t[e])instanceof NfCharcter?t:t.carret_part():this.eoc},e.prototype.update_children=function(){for(var t=0,e=this.parts,n=0,i=e.length;n<i;n++)e[n].set_index(t),t+=1;return this.eoc.index=t},e.prototype.draw=function(){var t,e,n,i,o;if(0===this.parts.length)return this.eoc.draw();for(o=[],t=0,e=(i=this.parts).length;t<e;t++)n=i[t],o.push(n.draw());return o},e.prototype.draw_forcus_box=function(){if(0!==this.parts.length)return this.dc.set_line_dash([2]),this.dc.draw_rect_color(this.get_position().x,this.get_position().y,this.size.x,this.size.y,ConstColor.EMPTY_CONTAINER),this.dc.set_line_dash([0])},e.prototype.get_parts_from_position=function(t,e){var n,i,o,r,s,a;if(this.is_include(t,e))for(n=i=0,o=(a=this.parts).length;i<o;n=++i){if(s=a[n],r=(n+1<this.parts.length?this.parts[n+1].get_position():this.size).x,s instanceof NfMultiContainer&&s.is_include(t,e))return s.get_parts_from_position(t,e);if(0===n&&t<s.get_position().x+2*s.size.x/3)return this.parts[0];if(s.get_position().x<=t&&t<=r)return s.get_position().x+2*s.size.x/3<t?this.parts[n+1]:this.parts[n]}return 0<this.parts.length&&(t<this.get_position().x||t<this.parts[0].x)?this.parts[0]:this.eoc},e.prototype.get_range_parts=function(t,e){for(var n,i,o=[],r=n=i=t,s=e;i<=s?n<=s:s<=n;r=i<=s?++n:--n)r<this.parts.length&&o.push(this.parts[r]);return o},e.prototype.calc_size=function(){var t,e,n,i,o,r,c,h,s,a,_,A;if(0<this.parts.length){for(n=0,o=(c=this.parts).length;n<o;n++)c[n].calc_size();for(e=this.char_vcenter(),i=_=A=t=a=0,r=(h=this.parts).length;i<r;i++)_+=(s=h[i].get_size_with_char_vcenter(e)).x,A=A>s.y?A:s.y,null!=s.bottom_height&&(t=t>s.bottom_height?t:s.bottom_height),null!=s.top_height&&(a=a>s.bottom_height?a:s.top_height);return this.size.x=_,this.size.y=A,this.size.bottom_height=t,this.size.top_height=a,this.eoc.calc_size()}return this.eoc.calc_size(),this.size.x=this.eoc.size.x,this.size.y=this.eoc.size.y,this.size.bottom_height=0,this.size.top_height=0},e.prototype.char_vcenter=function(){var t,e,n,i,o,r;if(0<this.parts.length){for(t=e=r=0,n=(o=this.parts).length;e<n;t=++e)i=o[t],r=Math.max(r,i.char_vcenter());return r}return this.eoc.char_vcenter()},e.prototype.do_layout=function(t){var e,n,i,o,r;for(this.calc_size(),this.set_position(t.x(),t.y()),e=this.char_vcenter(),n=0,i=(r=this.parts).length;n<i;n++)o=r[n],t.set_char_vcenter(e),this.dc.draw_line_color(t.x(),t.y(),t.x(),t.y()+e,"#000000"),o.do_layout(t);return this.eoc.do_layout(t)},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfEOC=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.size={x:0,y:0}}return extend(e,NfPart),0,e.prototype.calc_size=function(){return this.dc.select_fonttype(DC.ALNUM_FONT),this.dc.set_font_italic(!1),this.dc.reset_font(this),this.dc.set_font_scale(this.get_font_scale()),0!==this.index?this.size={x:0,y:this.prev().size.y}:this.size={x:this.dc.measure_char(this),y:this.get_font_height()},this.size.x=Math.max(this.size.x,10),this.size.y=Math.max(this.size.y,10)},e.prototype.char_vcenter=function(){return this.get_font_height()/2},e.prototype.do_layout=function(t){return this.set_position(t.x(),t.y()),0!==this.index?this.carret_info={x:t.x(),y:this.prev().get_position().y,height:this.prev().size.y}:(this.carret_info={x:t.x()+2+2,y:t.y()+2,height:this.size.y-2},t.move_x(this.size.x))},e.prototype.draw=function(){return"ExDisp"===this.canvas_type()?1:(this.dc.set_line_dash([2]),this.dc.draw_rect_color(this.get_position().x+2,this.get_position().y+2,this.size.x-4,this.size.y-4,ConstColor.EMPTY_CONTAINER),this.dc.set_line_dash([0]))},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfFraction=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.top_container=new NfContainer(this.dc),this.bottom_container=new NfContainer(this.dc),this.set_inner_container(this.bottom_container,this.top_container),this.set_inner_container_sorted_for_build(this.top_container,this.bottom_container)}return extend(e,NfMultiContainer),e.prototype.get_top_container=function(){return this.top_container},e.prototype.get_bottom_container=function(){return this.bottom_container},e.prototype.get_up_container=function(t){if(t===this.bottom_container)return this.top_container},e.prototype.get_down_container=function(t){if(t===this.top_container)return this.bottom_container},e.prototype.get_parts_from_position=function(t,e){return t<this.top_container.get_position().x&&t<this.bottom_container.get_position().x||e<this.top_container.get_position().y?this:(e<this.line_y?this.top_container:this.bottom_container).get_parts_from_position(t,e)},e.prototype.draw=function(){return this.top_container.draw(),this.dc.draw_line(this.line_x+2,this.line_y,this.line_x+this.line_w-2,this.line_y),this.bottom_container.draw(),this.draw_focus_box()},e.prototype.calc_size=function(){var t,e;return this.top_container.calc_size(),t=this.top_container.size,this.bottom_container.calc_size(),e=this.bottom_container.size,this.size.x=Math.max(t.x,e.x)+this.dc.measure_char(this)/2,this.size.y=t.y+t.bottom_height+e.y+e.bottom_height+3,this._char_vcenter=t.y+t.bottom_height+3},e.prototype.get_size_with_char_vcenter=function(t){return{x:this.size.x,y:this.size.y+t-this.char_vcenter()}},e.prototype.char_vcenter=function(){return this.top_container.size.y+this.top_container.size.bottom_height},e.prototype.do_layout=function(t){var e,n,i;return this.calc_size(),n=t.get_position(),e=t.get_char_vcenter(),i=n.y+e-(this.top_container.size.y+this.top_container.size.bottom_height),this.set_position(t.x(),i),t.move_x(this.size.x/2-this.top_container.size.x/2),t.set_y(i),t.set_char_vcenter(0),this.top_container.do_layout(t),this.line_x=n.x,this.line_y=n.y+e,t.set(n.x+this.size.x/2-this.bottom_container.size.x/2,this.line_y+2),t.set_char_vcenter(0),this.bottom_container.do_layout(t),this.line_w=this.size.x,t.set(this.get_position().x+this.size.x,n.y)},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfIntegral=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.top_container=new NfContainer(this.dc),this.bottom_container=new NfContainer(this.dc),this.right_container=new NfContainer(this.dc),this.set_inner_container(this.bottom_container,this.top_container,this.right_container),this.set_inner_container_sorted_for_build(this.top_container,this.bottom_container,this.right_container),this._integral=new NfCharcter(this.dc,"∫"),this._integral.set_parent(this)}return extend(e,NfMultiContainer),e.prototype.draw=function(){return this._integral.draw(),this.top_container.draw(),this.bottom_container.draw(),this.right_container.draw(),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.right_container.size.y<this._integral.size.y?this._ymin+this._integral.char_vcenter():this._ymin+this.right_container.char_vcenter()},e.prototype.calc_size=function(){var t,e;return this._integral.set_font_scale(2*this.get_font_scale()),this._integral.calc_size(),this.top_container.set_font_scale(.65*this.get_font_scale()),this.top_container.calc_size(),this.bottom_container.set_font_scale(.65*this.get_font_scale()),this.bottom_container.calc_size(),this.right_container.calc_size(),e=this.top_container.is_empty()?0:this._integral.size.x+this.top_container.size.x+this._integral.size.x/8,t=this.bottom_container.is_empty()?0:this.bottom_container.size.x+this._integral.size.x/2+this._integral.size.x/8,this.size.x=Math.max(e,t,this._integral.size.x)+this.right_container.size.x,e=Math.max(this._integral.size.y+this.get_font_height()/4,this.top_container.size.y-this.top_container.char_vcenter(),this.right_container.size.y),this._ymin=-Math.min(0,this._integral.size.y-this.bottom_container.size.y,-this.top_container.char_vcenter()),this.size.y=this._ymin+e+2,this.size.bottom_height=this.right_container.size.bottom_height},e.prototype.do_layout=function(t){var e,n,i,o;return this.calc_size(),n=t.get_position(),i=t.get_char_vcenter(),i=(o=t.get_char_vcenter_y())+(this.char_vcenter()-i),this.set_position(t.x(),i-this.char_vcenter()),this._integral.do_layout(t),t.set_y(i-(this.char_vcenter()-this._ymin)-this.top_container.char_vcenter()),t.set_char_vcenter(0),t.move_x(this._integral.size.x/8),this.top_container.do_layout(t),i=t.get_position().x,this.top_container.is_empty()&&(i=n.x+this._integral.size.x),t.set_x(n.x+this._integral.size.x/2+this._integral.size.x/8),t.set_y(this._integral.get_position().y+this._integral.size.y-this.bottom_container.size.y+this.get_font_height()/4),t.set_char_vcenter(0),this.bottom_container.do_layout(t),e=t.get_position().x,this.bottom_container.is_empty()&&(e=n.x+this._integral.size.x),t.set_x(Math.max(e,i)),t.set_y(o-this.right_container.size.y/2),t.set_char_vcenter(0),this.right_container.do_layout(t),t.set_x(n.x+this.size.x),t.set_y(n.y)},e.prototype.get_parts_from_position=function(t,e){return t<this.bottom_container.get_position().x?this:(this.right_container.get_position().y<e?!(this.bottom_container.get_position().y<e)||this.right_container.get_position().x<t?this.right_container:this.bottom_container:this.top_container).get_parts_from_position(t,e)},e.prototype.get_up_container=function(t){if(t===this.bottom_container||t===this.right_container)return this.top_container},e.prototype.get_down_container=function(t){if(t===this.top_container||t===this.right_container)return this.bottom_container},e.prototype.to_tex=function(){var t=BuilderTeX.get_tex_prefix(this);return this.bottom_container.is_empty()||(t+="_{"+this.bottom_container.to_tex()+"}"),this.top_container.is_empty()||(t+="^{"+this.top_container.to_tex()+"}"),this.right_container.is_empty()||(t+=this.right_container.to_tex()),t},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfLimit=function(){function r(t){var e,n,i,o;for(this.dc=t,r.__super__.constructor.call(this),this.bottom_container=new NfContainer(this.dc),this.right_container=new NfContainer(this.dc),this.set_inner_container(this.bottom_container,this.right_container),this.set_inner_container_sorted_for_build(this.bottom_container,this.right_container),this.lim_symbol=new NfContainer(this.dc),this.lim_symbol.set_parent(this),i=0,o=(e="lim".split("")).length;i<o;i++)n=e[i],(n=new NfCharcter(this.dc,n)).italic=!1,this.lim_symbol.push(n)}return extend(r,NfMultiContainer),r.prototype.draw=function(){return this.lim_symbol.draw(),this.bottom_container.draw(),this.right_container.draw(),this.draw_focus_box()},r.prototype.char_vcenter=function(){return-this.top_from_vcenter},r.prototype.calc_size=function(){var t=.6*this.get_font_scale();return 9<this.dc.get_font_size()*t?this.bottom_container.set_font_scale(t):this.bottom_container.set_font_scale(9/this.dc.get_font_size()),this.lim_symbol.calc_size(),this.bottom_container.calc_size(),this.right_container.calc_size(),this.hcenter_lim_bottom=Math.max(this.lim_symbol.size.x,this.bottom_container.size.x)/2,this._right_container_left=Math.max(this.lim_symbol.size.x,this.bottom_container.size.x),this.size.x=this._right_container_left+this.right_container.size.x,this.lim_vcenter=this.lim_symbol.char_vcenter(),this.top_from_vcenter=Math.min(-this.lim_vcenter,-this.right_container.char_vcenter()),this.bottom_from_vcenter=Math.max(this.lim_symbol.size.y+this.bottom_container.size.y-this.lim_vcenter,this.right_container.size.y-this.right_container.char_vcenter()),this.size.y=this.bottom_from_vcenter-this.top_from_vcenter,this.size.bottom_height=this.bottom_container.size.bottom_height},r.prototype.do_layout=function(t){var e=t.get_position(),n=t.get_char_vcenter_y();return this.set_position(t.x(),n+this.top_from_vcenter),t.set_x(e.x+this.hcenter_lim_bottom-this.lim_symbol.size.x/2),t.set_y(n-this.lim_symbol.char_vcenter()),this.lim_symbol.do_layout(t),t.set_x(e.x+this.hcenter_lim_bottom-this.bottom_container.size.x/2),t.set_y(this.lim_symbol.get_position().y+this.lim_symbol.size.y),this.bottom_container.do_layout(t),t.set_x(e.x+this._right_container_left),t.set_y(n-this.right_container.char_vcenter()),t.set_char_vcenter(0),this.right_container.do_layout(t),t.set_y(e.y),t.set_x(e.x+this.size.x)},r.prototype.get_parts_from_position=function(t,e){return t<this.right_container.get_position().x&&e<this.bottom_container.get_position().y?this:(this.right_container.get_position().x-10<t&&e<this.bottom_container.get_position().y?this.right_container:this.bottom_container).get_parts_from_position(t,e)},r.prototype.get_up_container=function(t){if(t===this.bottom_container)return this.right_container},r.prototype.get_down_container=function(t){if(t===this.right_container)return this.bottom_container},r.prototype.to_tex=function(){var t=BuilderTeX.get_tex_prefix(this);return this.bottom_container.is_empty()||(t+="_{"+this.bottom_container.to_tex()+"}"),this.right_container.is_empty()||(t+=this.right_container.to_tex()),t},r}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfLogarithm=function(){function r(t){var e,n,i,o;for(this.dc=t,r.__super__.constructor.call(this),this.bottom_container=new NfContainer(this.dc),this.right_container=new NfContainer(this.dc),this.set_inner_container(this.bottom_container,this.right_container),this.set_inner_container_sorted_for_build(this.bottom_container,this.right_container),this.log_symbol=new NfContainer(this.dc),this.log_symbol.set_parent(this),i=0,o=(e="log".split("")).length;i<o;i++)n=e[i],(n=new NfCharcter(this.dc,n)).italic=!1,this.log_symbol.push(n)}return extend(r,NfMultiContainer),r.prototype.draw=function(){return this.bottom_container.draw(),this.right_container.draw(),this.log_symbol.draw(),this.draw_focus_box()},r.prototype.char_vcenter=function(){return this.right_container.char_vcenter()},r.prototype.calc_size=function(){var t=.6*this.get_font_scale();return 9<this.dc.get_font_size()*t?this.bottom_container.set_font_scale(t):this.bottom_container.set_font_scale(9/this.dc.get_font_size()),this.bottom_container.calc_size(),this.bottom_container.calc_size(),this.right_container.calc_size(),this.log_symbol.calc_size(),this._top_of_container_from_vcenter=this.get_font_height()/8,this._right_container1_size_y_from_vcenter=this._top_of_container_from_vcenter+this.bottom_container.size.y,this.size.x=this.log_symbol.size.x+this.bottom_container.size.x+this.right_container.size.x,this.size.y=Math.max(this.log_symbol.size.y,this.char_vcenter()+this._right_container1_size_y_from_vcenter,this.right_container.size.y),this.size.bottom_height=Math.max(this.log_symbol.size.bottom_height,this.bottom_container.size.bottom_height,this.right_container.size.bottom_height)},r.prototype.do_layout=function(t){var e,n;t.get_position(),t.get_char_vcenter_y();return e=t.get_position(),n=t.get_char_vcenter_y(),this.set_position(t.x(),n-this.char_vcenter()),t.set_y(n-this.log_symbol.char_vcenter()),this.log_symbol.do_layout(t),t.set_y(n+this._top_of_container_from_vcenter),t.set_char_vcenter(0),this.bottom_container.do_layout(t),t.set_y(n-this.right_container.char_vcenter()),this.right_container.do_layout(t),t.set_x(e.x+this.size.x),t.set_y(e.y)},r.prototype.get_parts_from_position=function(t,e){return t<this.bottom_container.get_position().x?this:(this.right_container.get_position().x<t?this.right_container:this.bottom_container).get_parts_from_position(t,e)},r.prototype.get_up_container=function(t){if(t===this.bottom_container)return this.right_container},r.prototype.get_down_container=function(t){if(t===this.right_container)return this.bottom_container},r.prototype.to_tex=function(){var t=BuilderTeX.get_tex_prefix(this);return this.bottom_container.is_empty()||(t+="_{"+this.bottom_container.to_tex()+"}"),this.right_container.is_empty()||(t+=this.right_container.to_tex()),t},r}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfMain=function(){function e(t){e.__super__.constructor.call(this,t.dc),this.ex_calc_canvas=t}return extend(e,NfContainer),e.prototype.do_layout=function(){var t;return this.calc_size(),t=new LayoutVisitor,null!=this.ex_calc_canvas.height?(t.set_x(2),t.set_y(this.ex_calc_canvas.height/2-this.size.y/2)):(t.set_x(2),t.set_y(this.get_font_height()/8)),e.__super__.do_layout.call(this,t)},e.prototype.calc_size=function(){return e.__super__.calc_size.call(this),this.size.y=this.size.y+~~this.size.bottom_height+this.get_font_height()/8},e.prototype.get_font_height=function(){return this.dc.get_font_height()},e.prototype.get_font_size=function(){return this.dc.get_font_size()},e.prototype.get_font_scale=function(){return 1},e.prototype.update_children=function(){return e.__super__.update_children.call(this),this.do_layout()},e.prototype.main_part=function(){return this},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfProbability=function(){function e(t){e.__super__.constructor.call(this,t,"P")}return extend(e,NfBothSideContainer),e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfRemainderSetContainer=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.container=new NfContainer(this.dc),this.set_inner_container(this.container),this.set_inner_container_sorted_for_build(this.container)}return extend(e,NfMultiContainer),e.prototype.draw=function(){var t,e,n;return this.container.draw(),n=this.get_position(),t=Math.ceil(n.x)+1,n=Math.ceil(n.y),e=t+this.container.size.x,this.dc.set_line_width(1),this.dc.draw_line_color(t,n+this.yajirusi_h/2,e,n+this.yajirusi_h/2,"#000000"),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.container.char_vcenter()+this.yajirusi_h/2},e.prototype.calc_size=function(){return this.container.calc_size(),this.yajirusi_h=Math.ceil(this.get_font_height()/3),this.yajirusi_h%2!=1&&this.yajirusi_h,this.size.x=this.container.size.x+2,this.size.y=this.container.size.y+this.yajirusi_h/2,this.size.bottom_height=this.container.size.bottom_height},e.prototype.do_layout=function(t){var e,n;return this.calc_size(),e=t.get_position(),n=t.get_char_vcenter_y(),this.set_position(t.x(),n-this.char_vcenter()),t.move_x(1),t.set_y(n-this.container.char_vcenter()),t.set_char_vcenter(0),this.container.do_layout(t),t.set_y(e.y),t.move_x(1)},e.prototype.get_parts_from_position=function(t,e){return t<this.container.get_position().x||e<this.container.get_position().y?this:this.container.get_parts_from_position(t,e)},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfRepeatedCombination=function(){function e(t){e.__super__.constructor.call(this,t,"H")}return extend(e,NfBothSideContainer),e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfRoot=function(){var t;function e(t){this.dc=t,e.__super__.constructor.call(this),this.left_container=new NfContainer(this.dc),this.right_container=new NfContainer(this.dc),this.set_inner_container(this.left_container,this.right_container),this.set_inner_container_sorted_for_build(this.right_container,this.left_container)}return extend(e,NfMultiContainer),e.prototype.draw=function(){var t,e,n,i,o,r;for(this.right_container.draw(),this.left_container.draw(),o=this.get_position(),e=n=0,i=(r=this.hige.path).length;n<i;e=++n)t=r[e],0!==e&&(2===e?this.dc.set_line_width(2):this.dc.set_line_width(1),this.dc.draw_line(o.x+this.hige.path[e-1].x,this.wd_char_center+this.hige.path[e-1].y,o.x+t.x,this.wd_char_center+t.y));return this.draw_focus_box()},e.prototype.char_vcenter=function(){return this._vcenter-this._top},t=function(t,e){return t<e?e:t},e.prototype._left_size=function(){return t(this.left_container.size.x+9,6+this.char_w)},e.prototype._calc_hige=function(){var t=[],e=(this._left_size(),this.get_font_height());return t[0]={x:this._hige_left-this._left,y:this._vcenter+e/5},t[1]={x:this._hige_left+3-this._left,y:this._vcenter+e/12},t[2]={x:this._hige_left+3+3-this._left,y:this._bottom},t[3]={x:this._x_center-this._left,y:this._rtop2},t[4]={x:this.size.x,y:t[3].y},this.hige={path:t}},e.prototype.get_parts_from_position=function(t,e){return t<this.left_container.get_position().x?this:(t<this.right_container.get_position().x?this.left_container:this.right_container).get_parts_from_position(t,e)},e.prototype.calc_size=function(){var t=.6*this.get_font_scale();return 9<this.dc.get_font_size()*t?this.left_container.set_font_scale(t):this.left_container.set_font_scale(9/this.dc.get_font_size()),this.right_container.calc_size(),this.left_container.calc_size(),this._bottom=this.right_container.size.y-this.right_container.char_vcenter(),this._vcenter=0,this._rtop=-this.right_container.char_vcenter(),this._rtop2=this._rtop,this._rtop3=this._rtop2-2,this._ltop=-this.left_container.size.y-1,this._top=Math.min(this._rtop3,this._ltop),this._x_center=0,this._char_w=this.dc.measure_char(this),this._hige_left=-this._char_w-3-3,this._lright=-this.dc.measure_char(this.left_container),this._lleft=this._lright-this.left_container.size.x,this._left=Math.min(this._hige_left,this._lleft),this._rleft=this._x_center+1,this._rright=this._rleft+this.right_container.size.x,this.size.x=this._rright-this._left,this.size.y=this._bottom-this._top,this.size.bottom_height=this.right_container.size.bottom_height,this._calc_hige()},e.prototype.do_layout=function(t){var e;return this.calc_size(),e=t.get_position(),this._layout_vcenter=t.get_char_vcenter(),this.wd_char_center=e.y+this._layout_vcenter,this.diff=this._layout_vcenter-this._vcenter,this.diff,this._top,this.set_position(t.x(),e.y+this._layout_vcenter+this._top),t.move_x(this._lleft-this._left),t.set_y(this.wd_char_center+this._ltop),t.set_char_vcenter(0),this.left_container.do_layout(t),t.set_y(this.wd_char_center+this._rtop),t.set_x(e.x+this._rleft-this._left),t.set_char_vcenter(0),this.right_container.do_layout(t),t.set(e.x+this.size.x,e.y)},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfSigma=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.top_container=new NfContainer(this.dc),this.bottom_container=new NfContainer(this.dc),this.right_container=new NfContainer(this.dc),this.set_inner_container(this.top_container,this.bottom_container,this.right_container),this.set_inner_container_sorted_for_build(this.top_container,this.bottom_container,this.right_container),this.sigma_symbol=new NfCharcter(this.dc,"Σ"),this.sigma_symbol.set_parent(this)}return extend(e,NfMultiContainer),e.prototype.draw=function(){return this.sigma_symbol.draw(),this.top_container.draw(),this.bottom_container.draw(),this.right_container.draw(),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.top_container.size.y+this.sigma_symbol.char_vcenter()},e.prototype.calc_size=function(){return this.sigma_symbol.set_font_scale(1.25*this.get_font_scale()),this.sigma_symbol.calc_size(),this.top_container.set_font_scale(.65*this.get_font_scale()),this.top_container.calc_size(),this.bottom_container.set_font_scale(.65*this.get_font_scale()),this.bottom_container.calc_size(),this.right_container.calc_size(),this.max_left_size=Math.max(Math.max(this.sigma_symbol.size.x,this.top_container.size.x),this.bottom_container.size.x),this.top_left=-this.top_container.size.x/2,this.bottom_left=-this.bottom_container.size.x/2,this.simbol_left=-this.sigma_symbol.size.x/2,this.size.x=Math.max(this.max_left_size,this.max_left_size/2+this.sigma_symbol.size.x/2+this.right_container.size.x),this.size.y=this.sigma_symbol.size.y+this.top_container.size.y+this.bottom_container.size.y,this.size.bottom_height=this.bottom_container.size.bottom_height},e.prototype.do_layout=function(t){var e,n,i;return this.calc_size(),n=t.get_position(),t.get_char_vcenter(),i=t.get_char_vcenter_y(),this.set_position(t.x(),i-this.size.y/2),e=n.x+this.max_left_size/2,t.set_x(e+this.simbol_left),this.sigma_symbol.do_layout(t),t.set_x(e+this.top_left),t.set_y(this.sigma_symbol.get_position().y-this.top_container.size.y),t.set_char_vcenter(0),this.top_container.do_layout(t),t.set_x(e+this.bottom_left),t.set_y(this.sigma_symbol.get_position().y+this.sigma_symbol.size.y),t.set_char_vcenter(0),this.bottom_container.do_layout(t),t.set_x(this.sigma_symbol.get_position().x+this.sigma_symbol.size.x),t.set_y(i-this.right_container.size.y/2),t.set_char_vcenter(0),this.right_container.do_layout(t),t.set_x(n.x+this.size.x),t.set_y(n.y)},e.prototype.get_parts_from_position=function(t,e){return this.right_container.get_position().x<t?this.right_container.get_parts_from_position(t,e):this.sigma_symbol.get_position().y<=e&&e<=this.sigma_symbol.get_position().y+this.sigma_symbol.size.y?this:(e<this.sigma_symbol.get_position().y+this.sigma_symbol.size.y/2?this.top_container:this.bottom_container).get_parts_from_position(t,e)},e.prototype.get_up_container=function(t){if(t===this.bottom_container||t===this.right_container)return this.top_container},e.prototype.get_down_container=function(t){if(t===this.top_container||t===this.right_container)return this.bottom_container},e.prototype.to_tex=function(){var t=BuilderTeX.get_tex_prefix(this);return this.bottom_container.is_empty()||(t+="_{"+this.bottom_container.to_tex()+"}"),this.top_container.is_empty()||(t+="^{"+this.top_container.to_tex()+"}"),this.right_container.is_empty()||(t+=this.right_container.to_tex()),t},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfUpperBottomFormula=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.upper=new NfContainer(this.dc),this.bottom=new NfContainer(this.dc),this.set_inner_container(this.upper,this.bottom),this.set_inner_container_sorted_for_build(this.upper,this.bottom)}return extend(e,NfMultiContainer),e.prototype.draw=function(){return this.upper.draw(),this.bottom.draw(),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.upper.size.y},e.prototype.get_size_with_char_vcenter=function(t){return{x:this.size.x,y:this.size.y+t-this.char_vcenter(),bottom_height:this.size.bottom_height}},e.prototype.calc_size=function(){var t,e=.6*this.get_font_scale();return 9<this.dc.get_font_size()*e?(this.upper.set_font_scale(e),this.bottom.set_font_scale(e)):(this.upper.set_font_scale(9/this.dc.get_font_size()),this.bottom.set_font_scale(9/this.dc.get_font_size())),this.upper.calc_size(),this.size.x=this.upper.size.x,this.size.y=this.get_font_height()/2+this.upper.size.y,this.size.bottom_height=0,this.bottom.calc_size(),this._top_of_bottom=0,this.size.x=Math.max(this.upper.size.x,this.bottom.size.x),e=Math.max(this.upper.size.y+this.upper.size.bottom_height,this.get_font_height()/2),t=Math.max(this._top_of_bottom+this.bottom.size.y,this.get_font_height()/2),this.size.y=e+t,this.size.bottom_height=this.bottom.size.bottom_height},e.prototype.do_layout=function(t){var e,n,i;return this.calc_size(),n=t.get_position(),i=t.get_char_vcenter_y(),e=this.upper.size.y+this.upper.size.bottom_height,this.set_position(t.x(),i-e+2),t.set_y(i-e+2),t.set_char_vcenter(0),this.upper.do_layout(t),t.set_y(i+this._top_of_bottom),t.set_x(n.x),t.set_char_vcenter(0),this.bottom.do_layout(t),t.set_y(n.y),t.set_x(n.x+this.size.x)},e.prototype.get_parts_from_position=function(t,e){return(e<this.bottom.get_position().y?this.upper:this.bottom).get_parts_from_position(t,e)},e.prototype.get_up_container=function(t){if(t===this.bottom)return this.upper},e.prototype.get_down_container=function(t){if(t===this.upper)return this.bottom},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfUpperFormula=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.upper=new NfContainer(this.dc),this.set_inner_container(this.upper),this.set_inner_container_sorted_for_build(this.upper)}return extend(e,NfMultiContainer),e.prototype.draw=function(){return this.upper.draw(),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.has_fraction()?this.size.y-this.get_font_height()/2:2+Math.round(this.upper.size.y)},e.prototype.has_fraction=function(){return this.get_font_height()<this.upper.size.y},e.prototype.calc_size=function(){var t=.6*this.get_font_scale();return 9<this.dc.get_font_size()*t?this.upper.set_font_scale(t):this.upper.set_font_scale(9/this.dc.get_font_size()),this.upper.calc_size(),this.size.x=this.upper.size.x,this.has_fraction()?this.size.y=1+this.upper.size.y:this.size.y=2+Math.round(this.get_font_height()/2+this.upper.size.y),this.size.bottom_height=0},e.prototype.get_size_with_char_vcenter=function(t){return{x:this.size.x,y:this.size.y+t-this.char_vcenter()}},e.prototype.do_layout=function(t){var e,n,i;return this.calc_size(),n=t.get_position(),i=t.get_char_vcenter_y(),this.has_fraction()&&(i+=this.get_font_height()/2+1),e=this.upper.size.y+this.upper.size.bottom_height,this.set_position(t.x(),i-e),t.set_y(i-e),t.set_char_vcenter(0),this.upper.do_layout(t),t.set_y(n.y)},e.prototype.get_parts_from_position=function(t,e){return t<this.upper.get_position().x?this:this.upper.get_parts_from_position(t,e)},e}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,NfVector=function(){function e(t){this.dc=t,e.__super__.constructor.call(this),this.container=new NfContainer(this.dc),this.set_inner_container(this.container),this.set_inner_container_sorted_for_build(this.container)}return extend(e,NfMultiContainer),e.prototype.draw=function(){var t,e,n;return this.container.draw(),n=this.get_position(),t=Math.ceil(n.x)+1,n=Math.ceil(n.y),e=t+this.container.size.x,this.dc.set_line_width(1),this.dc.draw_line_color(t,n+Math.ceil(this.yajirusi_h/2)-.5,e,n+Math.ceil(this.yajirusi_h/2)-.5,"#000000"),this.dc.fill_path4(e,n+Math.ceil(this.yajirusi_h/2)-.5,e-this.yajirusi_w,n-.5,e-Math.ceil(this.yajirusi_w/2),n+Math.ceil(this.yajirusi_h/2)-.5,e-this.yajirusi_w,n+this.yajirusi_h-.5),this.draw_focus_box()},e.prototype.char_vcenter=function(){return this.container.char_vcenter()+this.yajirusi_h/2},e.prototype.calc_size=function(){return this.container.calc_size(),this.yajirusi_h=Math.ceil(this.get_font_height()/3),this.yajirusi_h%2!=1&&this.yajirusi_h,this.yajirusi_w=Math.ceil(this.dc.measure_char(this)/3*2),this.size.x=this.container.size.x+2,this.size.y=this.container.size.y+this.yajirusi_h/2,this.size.bottom_height=this.container.size.bottom_height},e.prototype.do_layout=function(t){var e,n;return this.calc_size(),e=t.get_position(),n=t.get_char_vcenter_y(),this.set_position(t.x(),n-this.char_vcenter()),t.move_x(1),t.set_y(n-this.container.char_vcenter()),t.set_char_vcenter(0),this.container.do_layout(t),t.set_y(e.y),t.move_x(1)},e.prototype.get_parts_from_position=function(t,e){return t<this.container.get_position().x||e<this.container.get_position().y?this:this.container.get_parts_from_position(t,e)},e}(),Action=function(){function t(){}return t.prototype.run=function(){},t}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,AcDelete=function(){function n(t,e){switch(this.ex_canvas=t,this.type=e,n.__super__.constructor.call(this),this.carret=this.ex_canvas.carret,this.type){case n.BACKSPACE:this.part=this.carret.get_part().prev();break;case n.DELETE:this.part=this.carret.get_part()}}return extend(n,Action),n.BACKSPACE=1,n.DELETE=2,n.DELETE_ALL=3,n.prototype.run=function(){var t;return this.type===n.DELETE_ALL?(this.ex_canvas.root.remove_all(),void this.ex_canvas.carret.move_to(this.ex_canvas.root.eoc)):null!=(null!=(t=this.part)?t.next():void 0)?(t=this.part.next(),this.part.delete(),this.carret.move_to(t)):void 0},n}(),extend=function(t,e){for(var n in e)hasProp.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty,AcInsert=function(){function n(t,e){this.ex_canvas=t,this.pt=e,n.__super__.constructor.call(this),this.carret=this.ex_canvas.carret}return extend(n,Action),n.prototype.run=function(){var t,e=this.carret.get_part();switch(this.pt.char){case"＜":case"＝":case"＞":case"≦":case"≧":this.ex_canvas.root!==e.parent&&this.invalid_parent(e)&&(t=this.root_parent_index(e),e=this.ex_canvas.root.get(t))}return e.parent.insert(e.index,this.pt),this.carret.move_to(this.pt.next())},n.prototype.invalid_parent=function(t){return!!t.parent&&(t instanceof NfUpperFormula||t instanceof NfBottomFormula||t instanceof NfUpperBottomFormula||(this.ex_canvas.root!==t.parent?this.invalid_parent(t.parent):void 0))},n.prototype.root_parent_index=function(t){return t.parent?this.ex_canvas.root!==t.parent?this.root_parent_index(t.parent):t.index+1:0},n}();HtmlKeyboard.keyboard_html='<style type="text/css">\ndiv._keyboard_key {\n\t-moz-box-shadow:inset 0px 1px 0px 0px #ffffff;\n\t-webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;\n\tbox-shadow:inset 0px 1px 0px 0px #ffffff;\n\tbackground:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f9f9f9), color-stop(1, #e9e9e9) );\n\tbackground:-moz-linear-gradient( center top, #f9f9f9 5%, #e9e9e9 100% );\n\tfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#f9f9f9\', endColorstr=\'#e9e9e9\');\n\tbackground-color:#f9f9f9;\n\t-webkit-border-top-left-radius:5px;\n\t-moz-border-radius-topleft:5px;\n\tborder-top-left-radius:5px;\n\t-webkit-border-top-right-radius:5px;\n\t-moz-border-radius-topright:5px;\n\tborder-top-right-radius:5px;\n\t-webkit-border-bottom-right-radius:5px;\n\t-moz-border-radius-bottomright:5px;\n\tborder-bottom-right-radius:5px;\n\t-webkit-border-bottom-left-radius:5px;\n\t-moz-border-radius-bottomleft:5px;\n\tborder-bottom-left-radius:5px;\n\ttext-indent:0px;\n\tborder:0px solid #dcdcdc;\n\tdisplay:inline-block;\n\tcolor:#666666;\n\tfont-family:"MS UI Gothic", "Hiragino Kaku Gothic ProN", "Droid Sans Japanese", "sans-serif";\n\tfont-size:<%=$key_font_size%>px;\n\tfont-weight:normal;\n\tfont-style:normal;\n\theight:40px;\n\tline-height:1.45cm;\n\twidth:40px;\n\ttext-decoration:none;\n\ttext-align:center;\n\tvertical-align:middle;\n\ttext-shadow:1px 1px 0px #ffffff;\n\tcursor:pointer;\n\t-moz-user-select: none;\n\t-khtml-user-select: none;\n\t-webkit-user-select: none;\n}\ndiv._keyboard_key:hover  {\n\tbackground:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #e9e9e9), color-stop(1, #f9f9f9) );\n\tbackground:-moz-linear-gradient( center top, #e9e9e9 5%, #f9f9f9 100% );\n\tfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#e9e9e9\', endColorstr=\'#f9f9f9\');\n\tbackground-color:#e9e9e9;\n}\ndiv._keyboard_key:active  {\n\tposition:relative;\n\ttop:1px;\n}\n\n._keyboard_all_bk {\n\tbackground:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #e0ffff), color-stop(1, #afeeee) );\n\tbackground:-moz-linear-gradient( center top, #e0ffff 5%, #afeeee 100% );\n\tfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#e0ffff\', endColorstr=\'#afeeee\');\n\tbackground-color:#e0ffff;\n\t-webkit-border-top-left-radius:5px;\n\t-moz-border-radius-topleft:5px;\n\tborder-top-left-radius:5px;\n\t-webkit-border-top-right-radius:5px;\n\t-moz-border-radius-topright:5px;\n\tborder-top-right-radius:5px;\n\t-webkit-border-bottom-right-radius:5px;\n\t-moz-border-radius-bottomright:5px;\n\tborder-bottom-right-radius:5px;\n\t-webkit-border-bottom-left-radius:5px;\n\t-moz-border-radius-bottomleft:5px;\n\tborder-bottom-left-radius:5px;\n}\n._keyboard_bk {\n  background-color: transparent;\n}\n._keyboard_table_td {\n  padding: 2 2;\n}\n\ndiv[data-key-type="alpha"] {\n  font-family: "Times New Roman", "SERIF";\n  font-style: italic;\n  \n}\ndiv[data-key-type="number"] {\n  font-family: "Times New Roman", "SERIF";\n}\ndiv[data-key-type="other"] {\n\tfont-family:"MS UI Gothic", "Hiragino Kaku Gothic ProN", "Droid Sans Japanese", "sans-serif";\n  \n}\n\ndiv[data-key-type="empty"] {\n  font-family: "Times New Roman", "SERIF";\n}\n\ndiv[data-key-type="mpfont"] {\n  font-family: "mplus_symbol", "SERIF";\n}\n\ndiv[data-key-type="integral"] {\n  font-family: "integral-symbol", "SERIF";\n}\n\ndiv[data-key-type="sigma"] {\n  font-family: "sigma-symbol", "SERIF";\n}\n\ndiv[data-key-type="root"] {\n  font-family: "root-symbol", "SERIF";\n}\n\n\ndiv._key_change_button {\n\t-moz-box-shadow:inset 0px 1px 0px 0px #c1ed9c;\n\t-webkit-box-shadow:inset 0px 1px 0px 0px #c1ed9c;\n\tbox-shadow:inset 0px 1px 0px 0px #c1ed9c;\n\tbackground:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #9dce2c), color-stop(1, #8cb82b) );\n\tbackground:-moz-linear-gradient( center top, #9dce2c 5%, #8cb82b 100% );\n\tfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#9dce2c\', endColorstr=\'#8cb82b\');\n\tbackground-color:#9dce2c;\n\t-webkit-border-top-left-radius:5px;\n\t-moz-border-radius-topleft:5px;\n\tborder-top-left-radius:5px;\n\t-webkit-border-top-right-radius:5px;\n\t-moz-border-radius-topright:5px;\n\tborder-top-right-radius:5px;\n\t-webkit-border-bottom-right-radius:5px;\n\t-moz-border-radius-bottomright:5px;\n\tborder-bottom-right-radius:5px;\n\t-webkit-border-bottom-left-radius:5px;\n\t-moz-border-radius-bottomleft:5px;\n\tborder-bottom-left-radius:5px;\n\ttext-indent:0;\n\tborder:1px solid #83c41a;\n\tdisplay:inline-block;\n\tcolor:#ffffff;\n\tfont-family:Arial;\n\tfont-size:18px;\n\tfont-weight:bold;\n\tfont-style:normal;\n\theight:0.725cm;\n\tline-height:0.725cm;\n\twidth:62px;\n\ttext-decoration:none;\n\ttext-align:center;\n\ttext-shadow:1px 1px 0px #689324;\n\tcursor:pointer;\n\t-moz-user-select: none;\n\t-khtml-user-select: none;\n\t-webkit-user-select: none;\n}\ndiv._key_change_button:hover {\n\tbackground:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #8cb82b), color-stop(1, #9dce2c) );\n\tbackground:-moz-linear-gradient( center top, #8cb82b 5%, #9dce2c 100% );\n\tfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#8cb82b\', endColorstr=\'#9dce2c\');\n\tbackground-color:#8cb82b;\n}\ndiv._key_change_button:active {\n\tposition:relative;\n\ttop:1px;\n}\n</style>\n\n  <div id="_keyboard">\n      <div class="_keyboard_page" id="_keyboard_high1" style="visibility:hidden; display:none;">\n      <table class="_keyboard_table _keyboard_all_bk" style="table-layout:fixed; width:10.65cm">\n      \x3c!-- キーボードナビ --\x3e\n      <tr class="_keyboard_table_tr_navi _keyboard_bk" style="table-layout:fixed; width:1.45cm; height=1.45cm">\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high1.prev" class="_key_change_button" style="width:1.45cm;"> 前 </div></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high1.next" class="_key_change_button" style="width:1.45cm;"> 次 </div></td>\n      </tr>\n      \n      \x3c!-- このページのボタン --\x3e\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key1" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">1</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key2" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">2</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key3" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">3</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key＋" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">＋</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key－" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">－</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key×" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">×</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key÷" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">÷</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key4" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">4</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key5" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">5</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key6" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">6</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key±" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">±</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key＝" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">＝</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key7" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">7</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key8" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">8</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key9" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">9</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key＜" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">＜</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key＞" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">＞</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key≦" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">≦</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key≧" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">≧</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key." data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">.</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key0" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">0</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key," data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">,</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key分数" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.58cm; font-weight: bold;">分数</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key累乗" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.58cm; font-weight: bold;">累乗</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key√" data-key-type=root style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">√</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key(" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">(</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key)" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">)</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key[" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">[</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key]" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">]</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key{" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">{</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key}" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">}</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key左" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">←</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key右" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">→</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyBS" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">BS</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyDel" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">Del</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n      </table>\n    </div>\n\n      <div class="_keyboard_page" id="_keyboard_high2" style="visibility:hidden; display:none;">\n      <table class="_keyboard_table _keyboard_all_bk" style="table-layout:fixed; width:10.65cm">\n      \x3c!-- キーボードナビ --\x3e\n      <tr class="_keyboard_table_tr_navi _keyboard_bk" style="table-layout:fixed; width:1.45cm; height=1.45cm">\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high2.prev" class="_key_change_button" style="width:1.45cm;"> 前 </div></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high2.next" class="_key_change_button" style="width:1.45cm;"> 次 </div></td>\n      </tr>\n      \n      \x3c!-- このページのボタン --\x3e\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keya" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">a</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyb" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">b</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyc" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">c</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyd" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">d</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keye" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">e</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyf" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">f</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyg" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">g</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyh" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">h</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyi" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">i</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyj" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">j</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyk" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">k</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyl" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">l</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keym" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">m</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyn" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">n</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyo" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">o</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyp" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">p</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyq" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">q</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyr" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">r</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keys" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">s</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyt" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">t</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyu" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">u</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyv" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">v</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyw" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">w</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyx" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">x</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyy" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">y</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyz" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">z</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyπ" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">π</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key大" data-key-type=number style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold; font-style: italic;">A/a</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key左" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">←</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key右" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">→</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyBS" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">BS</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyDel" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">Del</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n      </table>\n    </div>\n\n      <div class="_keyboard_page" id="_keyboard_high3" style="visibility:hidden; display:none;">\n      <table class="_keyboard_table _keyboard_all_bk" style="table-layout:fixed; width:10.65cm">\n      \x3c!-- キーボードナビ --\x3e\n      <tr class="_keyboard_table_tr_navi _keyboard_bk" style="table-layout:fixed; width:1.45cm; height=1.45cm">\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high3.prev" class="_key_change_button" style="width:1.45cm;"> 前 </div></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high3.next" class="_key_change_button" style="width:1.45cm;"> 次 </div></td>\n      </tr>\n      \n      \x3c!-- このページのボタン --\x3e\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keysin" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">sin</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keycos" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">cos</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keytan" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">tan</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key_P_" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">_P_</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key_C_" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">_C_</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key_H_" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">_H_</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key!" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">!</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key絶対値" data-key-type=other style="width:3.01cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">絶対値</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyベクトル" data-key-type=other style="width:3.01cm; height:1.45cm; font-size: 0.58cm; font-weight: bold;">ベクトル</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key余集合" data-key-type=other style="width:3.01cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">余集合</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keylog" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">log</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keylim" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">lim</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key下付" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.58cm; font-weight: bold;">下付</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∫" data-key-type=integral style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∫</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyΣ" data-key-type=sigma style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">Σ</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∅" data-key-type=empty style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∅</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∈" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∈</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∋" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∋</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key⊂" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">⊂</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key⊃" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">⊃</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∩" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∩</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∪" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∪</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyα" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">α</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyβ" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">β</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyγ" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">γ</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyσ" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">σ</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyθ" data-key-type=alpha style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">θ</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key左" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">←</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key右" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">→</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyBS" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">BS</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyDel" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">Del</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n      </table>\n    </div>\n\n      <div class="_keyboard_page" id="_keyboard_high4" style="visibility:hidden; display:none;">\n      <table class="_keyboard_table _keyboard_all_bk" style="table-layout:fixed; width:10.65cm">\n      \x3c!-- キーボードナビ --\x3e\n      <tr class="_keyboard_table_tr_navi _keyboard_bk" style="table-layout:fixed; width:1.45cm; height=1.45cm">\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high4.prev" class="_key_change_button" style="width:1.45cm;"> 前 </div></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"></td>\n        <td class="_keyboard_table_td _keyboard_bk"><div id="_keyboard_high4.next" class="_key_change_button" style="width:1.45cm;"> 次 </div></td>\n      </tr>\n      \n      \x3c!-- このページのボタン --\x3e\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key´" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">´</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyΔ" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">Δ</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key→" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">→</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∞" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∞</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key⊥" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">⊥</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyﾟ" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">ﾟ</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key≡" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">≡</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∥" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∥</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∽" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∽</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key△" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">△</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key∠" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">∠</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key：" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">：</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key≠" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">≠</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key≒" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">≒</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n              \n            \n            </td>\n          \n          </tr>\n      \n          <tr  class="_keyboard_table_tr_key _keyboard_bk" style="table-layout:fixed; width:1.65cm; height:1.55cm">\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div style="height:1.45cm;width:1.45cm;"></div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key左" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">←</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_key右" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 1.305cm;  ">→</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyBS" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">BS</div>\n              \n            \n            </td>\n          \n            <td class="_keyboard_table_td">\n            \n                \n              \n                <div class="_keyboard_key" id="_keyDel" data-key-type=other style="width:1.45cm; height:1.45cm; font-size: 0.725cm; font-weight: bold;">Del</div>\n              \n            \n            </td>\n          \n          </tr>\n      \n      </table>\n    </div>\n\n  </div>\n';